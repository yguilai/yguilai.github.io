{"posts":[{"title":"Typescriptä¹‹å°è£…Axios","content":"ç›´æ¥ä¸Šä»£ç å®‰è£…ä¾èµ–yarnaddaxios#æˆ–è€…npminstallaxios-SEncapsulation//config/index.tsexportdefault{api:{devApiBaseUrl:'/',//å¼€å‘ç¯å¢ƒbaseurlproApiBaseUrl:'/api/v1'//ç”Ÿäº§ç¯å¢ƒbaseurl}}//utils/request.tsimportaxios,{AxiosInstance,AxiosRequestConfig,AxiosPromise,AxiosResponse}from'axios'importconfigfrom'@/config'const{api:{devApiBaseUrl,proApiBaseUrl}}=configconstapiBaseUrl=process.env.NODE_ENV==='production'?proApiBaseUrl:devApiBaseUrl//ä¿®æ”¹é»˜è®¤çš„content-typeaxios.defaults.headers.post['Content-Type']='application/x-www-form-urlencoded'/***ç»Ÿä¸€è¿”å›çš„æ•°æ®æ ¼å¼,æ ¹æ®å…·ä½“ä¸šåŠ¡ä¿®æ”¹*/exportinterfaceResponseData{code:numbermsg:stringdata?:any}classHttpRequest{constructor(publicbaseUrl:string=apiBaseUrl){this.baseUrl=baseUrl}publicrequest(options:AxiosRequestConfig):AxiosPromise{constinstance:AxiosInstance=axios.create()options=this.mergeConfig(options)this.interceptors(instance,options.url)returninstance(options)}/***é…ç½®æ‹¦æˆªå™¨*@paraminstance*@paramurl*/privateinterceptors(instance:AxiosInstance,url?:string){instance.interceptors.request.use((config:AxiosRequestConfig)=&gt;{//å¯ä»¥åœ¨è¿™é…ç½®tokenè¯·æ±‚å¤´returnconfig},error=&gt;Promise.reject(error))instance.interceptors.response.use((res:AxiosResponse)=&gt;{const{data}=resconst{code,msg}=data//è¿™é‡Œè®¾ç½®è¿”å›çŠ¶æ€ç ä¸º0è¡¨ç¤ºæˆåŠŸ,è¯·æ ¹æ®å…·ä½“ä¸šåŠ¡ä¿®æ”¹if(code!==0){//TODOä½¿ç”¨æ¶ˆæ¯çª—æç¤ºé”™è¯¯console.error(msg)}returnres},error=&gt;Promise.reject(error))}/***åˆå¹¶åŸºç¡€é…ç½®*@paramoptions*/privatemergeConfig(options:AxiosRequestConfig):AxiosRequestConfig{returnObject.assign({baseURL:this.baseUrl},options)}}exportdefaultHttpRequestHowtouse//api/index.tsimportHttpRequestfrom&quot;@/utils/request&quot;export*from'@/utils/request'exportdefaultnewHttpRequest()//api/user.tsimportaxios,{ResponseData}from'./index'import{AxiosPromise}from'axios'interfaceLoginReqArgInterface{username:stringpassword:number|string}//ä¼ å…¥æ³›å‹å˜é‡ResponseData,å¯ä»¥åœ¨æ“ä½œè¿”å›ç»“æœé›†æ—¶,è·å¾—ä»£ç æç¤ºexportconstloginApi=(data:LoginReqArgInterface):AxiosPromise&lt;ResponseData&gt;=&gt;{returnaxios.request({url:'/user/login',data,method:'POST'})}","link":"https://blog.yguilai.com/post/ojQKZXlfE/"},{"title":"Typescriptä¹‹tsconfig.jsoné…ç½®","content":"tsconfig.jsonçš„å¯é…ç½®é¡¹{&quot;compileOnSave&quot;:true,&quot;files&quot;:[],&quot;include&quot;:[],&quot;exclude&quot;:[],&quot;extends&quot;:&quot;&quot;,&quot;compilerOptions&quot;:{}}compileOnSavecompileOnSaveçš„å€¼æ˜¯trueæˆ–false.å¦‚æœè®¾ä¸ºtrue,åœ¨ç¼–è¾‘æ–‡ä»¶ä¿å­˜çš„æ—¶å€™,ç¼–è¾‘å™¨ä¼šæ ¹æ®tsconfig.jsonçš„é…ç½®é‡æ–°ç”Ÿæˆæ–‡ä»¶.(éœ€è¦ç¼–è¾‘å™¨æ”¯æŒ)filesfileså¯ä»¥é…ç½®ä¸€ä¸ªæ•°ç»„åˆ—è¡¨,é‡Œé¢åŒ…å«æŒ‡å®šæ–‡ä»¶çš„ç›¸å¯¹æˆ–ç»å¯¹è·¯å¾„.ç¼–è¯‘å™¨åœ¨ç¼–è¯‘ideæ—¶å€™åªä¼šç¼–è¯‘åŒ…å«åœ¨filesä¸­åˆ—å‡ºçš„æ–‡ä»¶.å¦‚æœä¸æŒ‡å®š,åˆ™å–å†³äºæœ‰æ²¡æœ‰è®¾ç½®includeé€‰é¡¹;å¦‚æœæ²¡æœ‰includeé€‰é¡¹,åˆ™é»˜è®¤ä¼šç¼–è¯‘æ ¹ç›®å½•ä»¥åŠæ‰€æœ‰å­ç›®å½•çš„æ–‡ä»¶.è¿™é‡Œåˆ—å‡ºçš„è·¯å¾„å¿…é¡»æ˜¯æŒ‡å®šæ–‡ä»¶,è€Œä¸æ˜¯æŸä¸ªæ–‡ä»¶å¤¹,è€Œä¸”ä¸èƒ½ä½¿ç”¨*ã€?ã€**/ç­‰é€šé…ç¬¦includeæŒ‡å®šè¦ç¼–è¯‘çš„è·¯å¾„åˆ—è¡¨ï¼Œä½†å’Œfilesçš„åŒºåˆ«åœ¨äºï¼Œè¿™é‡Œçš„è·¯å¾„å¯ä»¥æ˜¯æ–‡ä»¶å¤¹ï¼Œä¹Ÿå¯ä»¥æ˜¯æ–‡ä»¶ï¼Œå¯ä»¥ä½¿ç”¨ç›¸å¯¹å’Œç»å¯¹è·¯å¾„ï¼Œè€Œä¸”å¯ä»¥ä½¿ç”¨é€šé…ç¬¦.æ¯”å¦‚&quot;./src&quot;å³è¡¨ç¤ºè¦ç¼–è¯‘srcæ–‡ä»¶å¤¹ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ä»¥åŠå­æ–‡ä»¶å¤¹çš„æ–‡ä»¶.excludeè¡¨ç¤ºè¦æ’é™¤çš„ã€ä¸ç¼–è¯‘çš„æ–‡ä»¶ï¼Œå®ƒä¹Ÿå¯ä»¥æŒ‡å®šä¸€ä¸ªåˆ—è¡¨ï¼Œè§„åˆ™å’Œincludeä¸€æ ·ï¼Œå¯ä»¥æ˜¯æ–‡ä»¶å¯ä»¥æ˜¯æ–‡ä»¶å¤¹,å¯ä»¥æ˜¯ç›¸å¯¹è·¯å¾„æˆ–ç»å¯¹è·¯å¾„ï¼Œå¯ä»¥ä½¿ç”¨é€šé…ç¬¦.extendsé€šè¿‡æŒ‡å®šä¸€ä¸ªå…¶å®ƒçš„tsconfig.jsonæ–‡ä»¶è·¯å¾„ï¼Œæ¥ç»§æ‰¿è¿™ä¸ªé…ç½®æ–‡ä»¶é‡Œçš„é…ç½®ï¼Œç»§æ‰¿æ¥çš„æ–‡ä»¶é…ç½®ä¼šè¦†ç›–å½“å‰æ–‡ä»¶å®šä¹‰çš„é…ç½®.TSåœ¨3.2ç‰ˆæœ¬å¼€å§‹ï¼Œæ”¯æŒç»§æ‰¿ä¸€ä¸ªæ¥è‡ªNode.jsåŒ…çš„tsconfig.jsoné…ç½®æ–‡ä»¶.compilerOptionsåŒ…å«å¾ˆå¤šå¯é…ç½®é¡¹,ç”¨æ¥è®¾ç½®ç¼–è¯‘é€‰é¡¹.targetç”¨äºæŒ‡å®šç¼–è¯‘ä¹‹åçš„ç‰ˆæœ¬ç›®æ ‡,å¯é€‰å€¼æœ‰:ES3ï¼ˆé»˜è®¤å€¼ï¼‰ã€ES5ã€ES2015ã€ES2016ã€ES2017ã€ESNEXT.å¦‚æœä¸é…ç½®,åˆ™é»˜è®¤ä½¿ç”¨ES3ç‰ˆæœ¬,å¦‚æœè®¾ä¸ºESNEXT,åˆ™ä½¿ç”¨æœ€æ–°çš„ESè§„èŒƒç‰ˆæœ¬.moduleç”¨äºæŒ‡å®šè¦ä½¿ç”¨çš„æ¨¡å—æ ‡å‡†,å¯é€‰å€¼:commonjsã€amdã€systemã€umdã€s2015(æˆ–å†™es6).å¦‚æœä¸è®¾ç½®moduleé€‰é¡¹,åˆ™åˆ¤æ–­targeté€‰é¡¹,å¦‚æœtargetæ¸²æŸ“è®¾ä¸ºES6,åˆ™moduleé»˜è®¤ä¸ºES6,å¦åˆ™å°±æ˜¯commonjslibç”¨äºæŒ‡å®šè¦åŒ…å«åœ¨ç¼–è¯‘ä¸­çš„åº“æ–‡ä»¶,å¦‚æœä½ è¦ä½¿ç”¨ä¸€äº›ES6çš„æ–°è¯­æ³•,åˆ™éœ€è¦å¼•å…¥ES6/ES2015è¿™ä¸ªåº“,å¦‚æœæ²¡æœ‰æŒ‡å®šlibé…ç½®ï¼Œé»˜è®¤ä¼šåŠ è½½ä¸€äº›åº“ï¼Œè€ŒåŠ è½½ä»€ä¹ˆåº“æ˜¯å—targetå½±å“çš„ã€‚å¦‚æœtargetä¸ºES5ï¼Œé»˜è®¤åŒ…å«çš„åº“æœ‰DOMã€ES5å’ŒScriptHostï¼›å¦‚æœtargetæ˜¯ES6ï¼Œé»˜è®¤å¼•å…¥çš„åº“æœ‰DOMã€ES6ã€DOM.Iterableå’ŒScriptHost.allowJsallowJsè®¾ç½®çš„å€¼ä¸ºtrueæˆ–falseï¼Œç”¨æ¥æŒ‡å®šæ˜¯å¦å…è®¸ç¼–è¯‘JSæ–‡ä»¶ï¼Œé»˜è®¤æ˜¯falseï¼Œå³ä¸ç¼–è¯‘JSæ–‡ä»¶.æœªå®Œå¾…ç»­...","link":"https://blog.yguilai.com/post/oiRKwJIS-/"},{"title":"Typescriptä¹‹æ³›å‹çº¦æŸ","content":"æ³›å‹çº¦æŸå°±æ˜¯ä½¿ç”¨ä¸€ä¸ªç±»å‹å’Œextendså¯¹æ³›å‹è¿›è¡Œçº¦æŸæ³›å‹çº¦æŸä¾‹å­:interfaceWithLength{length:number}constgetLength=&lt;TextendsWithLength&gt;(param:T):number=&gt;{returnparam.length}getLength(&quot;abcdefg&quot;)//7getLength([1,2,3])//3getLength({length:5})//5getLength(123)//errorç±»å‹â€œ123â€çš„å‚æ•°ä¸èƒ½èµ‹ç»™ç±»å‹â€œWithLengthâ€çš„å‚æ•°ä»ä¸Šè¿°ä¾‹å­å¯ä»¥çœ‹åˆ°,æ³›å‹å˜é‡Tå—åˆ°æ¥å£WithLenghtçš„çº¦æŸ,ä¸ç®¡å®ƒæ˜¯ä»€ä¹ˆç±»å‹,ä½†å¿…é¡»æœ‰ä¸€ä¸ªlengthå±æ€§.æ³›å‹çº¦æŸä¸­ä½¿ç”¨ç±»å‹å‚æ•°ä¾‹å­:constgetProp=(obj,propName)=&gt;{returnobj[propName]}constobj={a:'aaa',b:'bbb'}getProp(obj,'c')//undefinedä»ä¸Šé¢è¿™ä¸ªä¾‹å­å¯ä»¥çœ‹å‡º,å½“è·å–è¿™ä¸ªå¯¹è±¡çš„'c'å±æ€§æ—¶,å°±ä¼šå¾—åˆ°undefined.è¿™é‡Œæˆ‘ä»¬å°±éœ€è¦ç”¨åˆ°ç´¢å¼•ç±»å‹keyofç»“åˆæ³›å‹æ¥å®ç°å¯¹è¿™ä¸ªé—®é¢˜çš„æ£€æŸ¥constgetProp=&lt;T,KextendskeyofT&gt;(obj:T,propName:K)=&gt;{returnobj[propName]}constobj={a:'aaa',b:'bbb'}getProp(obj,'c')//ç±»å‹â€œ&quot;c&quot;â€çš„å‚æ•°ä¸èƒ½èµ‹ç»™ç±»å‹â€œ&quot;a&quot;|&quot;b&quot;â€çš„å‚æ•°keyofå¯ä»¥ç†è§£ä¸ºä¸€ä¸ªç”±æ³›å‹å˜é‡Tçš„å±æ€§åæ„æˆçš„è”åˆç±»å‹,å› æ­¤Kå°±è¢«çº¦æŸä¸ºäº†åªèƒ½æ—¶'a'æˆ–'b',æ‰€ä¼ å…¥å­—ç¬¦ä¸²'c'æ—¶,tså°±ä¼šæ£€æµ‹å‡ºé”™è¯¯","link":"https://blog.yguilai.com/post/ZUto8nM6t/"},{"title":"Typescriptä¹‹ç±»å‹æ–­è¨€","content":"ä¸¤ç§å†™æ³•,ä¸€ç§æ˜¯&lt;type&gt;value,ä¸€ç§æ˜¯valueastypeä¾‹å­:constgetStrLength=(target:string|number):number=&gt;{if((&lt;string&gt;targer).length){//è¿™ç§å†™æ³•åœ¨jsxä¸­ä¸æ”¯æŒ,åŒæ—¶ä¹Ÿæ˜¯tslintä¸å»ºè®®çš„å†™æ³•return(targetasstring).length//å»ºè®®å†™æ³•}else{returntarget.toString().length}}","link":"https://blog.yguilai.com/post/Zwy9o_K7j/"},{"title":"Typescriptä¹‹tsè¡¥å……çš„å…­ä¸ªç±»å‹","content":"å…ƒç»„å…ƒç»„å¯ä»¥çœ‹ä½œæ˜¯æ•°ç»„çš„æ‹“å±•,å®ƒè¡¨ç¤ºå·²çŸ¥çš„å…ƒç´ æ•°é‡å’Œç±»å‹çš„æ•°ç»„é€šè¿‡lettuple:[string,number,boolean]çš„æ–¹å¼å®šä¹‰å„ä¸ªä½ç½®ä¸Šçš„å…ƒç´ ç±»å‹éƒ½è¦å¯¹åº”,å…ƒç´ ä¸ªæ•°ä¹Ÿè¦ä¸€è‡´æšä¸¾tsåœ¨esåŸæœ‰ç±»å‹é¸¡å‡ºä¸ŠåŠ å…¥æšä¸¾ç±»å‹Anyç¨‹åºæœ‰æ—¶æ˜¯å¤šå˜çš„,æœ‰æ—¶æˆ‘ä»¬åœ¨ç¼–å†™ä»£ç æ—¶å¹¶ä¸èƒ½æ¸…æ¥šçš„çŸ¥é“ä¸€ä¸ªå€¼åˆ°åº•æ—¶ä»€ä¹ˆç±»å‹,è¿™ä¸ªæ—¶å€™å°±éœ€è¦ç”¨åˆ°anyç±»å‹,eg:letdom:any=document.getElementById('myId')å¯ä»¥åœ¨å®šä¹‰æ•°ç»„ç±»å‹æ—¶ä½¿ç”¨anyæ¥æŒ‡å®šæ•°ç»„ä¸­çš„å…ƒç´ ç±»å‹ä¸ºä»»æ„ç±»å‹ä¸åº”è¯¥æ»¥ç”¨anyç±»å‹,å¦‚æœä»»ä½•å€¼éƒ½æŒ‡å®šä¸ºanyç±»å‹,é‚£ä¹ˆtypescriptå°±å˜æˆäº†&quot;anyscript&quot;ğŸ˜‚voidvoidå’Œanyç›¸å,anyè¡¨ç¤ºä»»æ„ç±»å‹,voidåˆ™æ˜¯è¡¨ç¤ºæ²¡æœ‰ä»»æ„ç±»å‹å®šä¹‰å‡½æ•°,æ²¡æœ‰è¿”å›å€¼æ—¶å¸¸ç”¨åˆ°voidç±»å‹çš„å˜é‡åªèƒ½èµ‹å€¼ä¸ºundefinedå’Œnullnerverneverç±»å‹æŒ‡é‚£äº›æ°¸ä¸å­˜åœ¨çš„ç±»å‹é™¤å®ƒè‡ªèº«å¤–,ä»»ä½•ç±»å‹éƒ½ä¸èƒ½èµ‹å€¼ç»™neverç±»å‹unknownunknownå’Œanyå¾ˆåƒ,ä½†æ˜¯unknownç›¸å¯¹ä¸anyæ˜¯å®‰å…¨çš„æ‹“å±•ç±»å‹äº¤å‰ç±»å‹ä½¿ç”¨&amp;ç¬¦å·å®šä¹‰,è¢«&amp;ç¬¦å·é“¾æ¥çš„å¤šä¸ªç±»å‹æ„æˆä¸€ä¸ªäº¤å‰ç±»å‹è”åˆç±»å‹è”åˆç±»å‹æ˜¯è¦æ±‚æ˜¯è¦ç¬¦åˆè”åˆç±»å‹ä¸­ä»»æ„ä¸€ç§ç±»å‹å³å¯,ä½¿ç”¨|ç¬¦å·å®šä¹‰","link":"https://blog.yguilai.com/post/zpYjIzrB_/"},{"title":"yarn create react-app æŠ¥é”™æ–‡ä»¶åã€ç›®å½•åæˆ–å·æ ‡è¯­æ³•ä¸æ­£ç¡®","content":"æœ€è¿‘å­¦ä¹ react,çœ‹å®˜æ–¹æ–‡æ¡£åˆ©ç”¨yarnæ–°å»ºé¡¹ç›®è¿è¡Œyarncreatereact-appmy-appç›´æ¥æŠ¥é”™çœ‹ç½‘ä¸Šè§£å†³åŠæ³•å¾ˆå¤šéƒ½æ˜¯ä¿®æ”¹create-react-app.cmd,ç„¶åæ·»åŠ ç¯å¢ƒå˜é‡,æ„Ÿè§‰å¾ˆä¸ä¼˜é›…æŸ¥äº†å¾ˆå¤šèµ„æ–™å,å‘ç°ä¸»è¦åŸå› æ˜¯æˆ‘ç”¨npmå…¨å±€å®‰è£…çš„yarn,å¯¼è‡´yarnçš„binç›®å½•ä¸å®‰è£…ç›®å½•åœ¨ä¸åŒåˆ†åŒºğŸ™„æŸ¥çœ‹yarnçš„binç›®å½•yarnglobalbinæŸ¥çœ‹yarnçš„å®‰è£…ç›®å½•yarnglobaldirè¿™é‡Œæ˜¯æˆ‘å·²ç»ä¿®æ”¹äº†çš„,åŸæ¥æ˜¯åœ¨Cç›˜å¦‚æœå‘ç°binç›®å½•ä¸å®‰è£…ç›®å½•ä¸åœ¨åŒä¸€ä¸ªåˆ†åŒº,å°±å°†yarnçš„å®‰è£…ä½ç½®ä¿®æ”¹åˆ°åŒä¸€åˆ†åŒºyarnconfigsetglobal-folder&quot;D:\\Develop\\yarn\\global&quot;yarnconfigsetcache-folder&quot;D:\\Develop\\yarn\\cache&quot;å†è¿è¡Œyarncreatereact-appmy-appå¯ä»¥å‘ç°å·²ç»æå®šäº†ğŸ‘Œ","link":"https://blog.yguilai.com/post/x1hPVO9h_/"},{"title":"Win10è§£å†³æ— æ³•è°ƒèŠ‚å±å¹•äº®åº¦é—®é¢˜","content":"ç½‘ä¸Šæ‰¾äº†å¾ˆå¤šæ–¹æ³•,å¦‚:é‡è£…é›†æ˜¾é©±åŠ¨ã€ä¿®æ”¹æ³¨å†Œè¡¨,éƒ½æ²¡ç”¨å¦‚æœå®‰è£…äº†TeamViewer,å‘æ—¥è‘µä¹‹ç±»çš„è¿œç¨‹æ§åˆ¶è½¯ä»¶,ä¼šè‡ªåŠ¨å®‰è£…ç›‘è§†å™¨é©±åŠ¨è§£å†³åŠæ³•:Win+Ræ‰“å¼€è¿è¡Œçª—å£,è¾“å…¥devmgmt.msc,å›è½¦æ‰“å¼€è®¾å¤‡ç®¡ç†å™¨é¢æ¿,æ‰¾åˆ°ç›‘è§†å™¨å¯ä»¥å‘ç°ç›‘è§†å™¨é©±åŠ¨æ˜¾ç¤ºä¸ºPnP-Monitor(Standard)(å‚å•†ä¸ºTeamViewer)æˆ–è€…GenericMonitor(orayOPMS)(å‚å•†ä¸ºå‘æ—¥è‘µ)å³é”®é€‰ä¸­å¯¹åº”é©±åŠ¨,æ‰“å¼€å±æ€§&gt;é©±åŠ¨ç¨‹åº&gt;æ›´æ–°é©±åŠ¨ç¨‹åº&gt;æµè§ˆè®¡ç®—æœºä»¥æŸ¥æ‰¾é©±åŠ¨ç¨‹åºè½¯ä»¶&gt;ä»è®¡ç®—æœºçš„è®¾å¤‡é©±åŠ¨ç¨‹åºåˆ—è¡¨ä¸­é€‰å–&gt;é€‰ä¸­é€šç”¨å³æ’å³ç”¨ç›‘è§†å™¨,ç‚¹å‡»ä¸‹ä¸€æ­¥å®‰è£…å³å¯,æœ€å¥½é‡å¯ä¸€ä¸‹ç”µè„‘","link":"https://blog.yguilai.com/post/TKVP2Etmw/"},{"title":"Goæ—¥å¿—åº“Zapä¸lumberjacké…ç½®","content":"packagecoreimport(&quot;go-gin-api-example/core/global&quot;&quot;go.uber.org/zap&quot;&quot;go.uber.org/zap/zapcore&quot;&quot;gopkg.in/natefinch/lumberjack.v2&quot;&quot;os&quot;&quot;strings&quot;)funcinitZapLogger(){varlogger*zap.Loggercore:=zapcore.NewCore(newZapEncoder(),newWriteSyncer(),newZapLevel())//setinitializefieldsfield:=zap.Fields(zap.String(&quot;ApplicationName&quot;,global.CONFIG.App.Name))//judgecurrentenvironmentispro?ifglobal.CONFIG.App.Env!=&quot;pro&quot;{//enabledevmodecaller:=zap.AddCaller()development:=zap.Development()logger=zap.New(core,caller,development,field)}else{logger=zap.New(core,field)}//saveasaglobalvariableglobal.LOG=logger}funcnewWriteSyncer()zapcore.WriteSyncer{if!global.CONFIG.Log.EnableLogFile{returnzapcore.NewMultiWriteSyncer(zapcore.AddSync(os.Stdout))}else{logConfig:=global.CONFIG.Loghook:=lumberjack.Logger{Filename:logConfig.File.Path+string(os.PathSeparator)+global.CONFIG.App.Name+&quot;.log&quot;,MaxSize:logConfig.File.MaxSize,MaxBackups:logConfig.File.MaxBackups,MaxAge:logConfig.File.MaxAge,Compress:logConfig.File.Compress,}returnzapcore.NewMultiWriteSyncer(zapcore.AddSync(os.Stdout),zapcore.AddSync(&amp;hook))}}funcnewZapEncoder()zapcore.Encoder{encoderCfg:=zapcore.EncoderConfig{TimeKey:&quot;time&quot;,LevelKey:&quot;level&quot;,NameKey:&quot;logger&quot;,CallerKey:&quot;lineNum&quot;,MessageKey:&quot;msg&quot;,StacktraceKey:&quot;stacktrace&quot;,LineEnding:zapcore.DefaultLineEnding,EncodeLevel:zapcore.CapitalLevelEncoder,//å¤§å†™ç¼–ç å™¨EncodeTime:zapcore.ISO8601TimeEncoder,//ISO8601UTCæ—¶é—´æ ¼å¼EncodeDuration:zapcore.SecondsDurationEncoder,EncodeCaller:zapcore.ShortCallerEncoder,//çŸ­è·¯å¾„ç¼–ç å™¨EncodeName:zapcore.FullNameEncoder,}ifglobal.CONFIG.Log.Encoder==&quot;json&quot;{returnzapcore.NewJSONEncoder(encoderCfg)}else{returnzapcore.NewConsoleEncoder(encoderCfg)}}funcnewZapLevel()zap.AtomicLevel{levelMap:=map[string]zapcore.Level{&quot;DEBUG&quot;:zap.DebugLevel,&quot;INFO&quot;:zap.InfoLevel,&quot;WARN&quot;:zap.WarnLevel,&quot;ERROR&quot;:zap.ErrorLevel,&quot;DPANIC&quot;:zap.DPanicLevel,&quot;PANIC&quot;:zap.PanicLevel,&quot;FATAL&quot;:zap.FatalLevel,}level:=zap.NewAtomicLevel()ifl,ok:=levelMap[strings.ToUpper(global.CONFIG.Log.Level)];ok{level.SetLevel(l)}else{level.SetLevel(zap.InfoLevel)}returnlevel}","link":"https://blog.yguilai.com/post/L_yuiYNgS/"},{"title":"ElementUIè‡ªå®šä¹‰ä¸Šä¼  -ä»¥ä¸Šä¼ å›¾æ ‡åˆ°ä¸ƒç‰›äº‘ä¸ºä¾‹","content":"è§£å†³ElementUIä¸Šä¼ ç»„ä»¶æ— æ³•è·å–å†…éƒ¨æ–‡ä»¶åˆ—è¡¨çš„ç¼ºé™·&lt;template&gt;&lt;div&gt;&lt;el-uploadaction=&quot;#&quot;class=&quot;icon-uploader&quot;:auto-upload=&quot;false&quot;:on-change=&quot;onIcoUploadChange&quot;:show-file-list=&quot;false&quot;accept=&quot;image/*&quot;&gt;&lt;imgv-if=&quot;imageUrl!==''&quot;:src=&quot;imageUrl&quot;class=&quot;ico&quot;/&gt;&lt;iv-elseclass=&quot;el-icon-plus&quot;/&gt;&lt;divslot=&quot;tip&quot;class=&quot;el-upload__tip&quot;&gt;åªèƒ½ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶ï¼Œä¸”ä¸è¶…è¿‡200kb&lt;/div&gt;&lt;/el-upload&gt;&lt;el-button@click=&quot;upload()&quot;&gt;ä¸Šä¼ &lt;/el-button&gt;&lt;/div&gt;&lt;/template&gt;&lt;script&gt;exportdefault{data(){return{icoFile:null,imageUrl:'',qiniuToken:''}},methods:{//è·å–ä¸Šä¼ çš„æ–‡ä»¶å¯¹è±¡onIcoUploadChange(file,fileList){this.icoFile=file//åˆ›å»ºä¸€ä¸ªæœ¬åœ°blobé“¾æ¥ç”¨äºå›¾ç‰‡é¢„è§ˆthis.imageUrl=URL.createObjectURL(file.raw)},//ä¸Šä¼ æ–‡ä»¶åˆ°ä¸ƒç‰›asyncupload(){if(this.icoFile===null){this.$message.error('è¯·å…ˆä¸Šä¼ æ–‡ä»¶')return}//åˆ¤æ–­tokenæ˜¯å¦ä¸ºç©ºif(this.qiniuToken===''){try{const{data}=awaitgetQiniuToken()this.qiniuToken=data}catch(err){this.$message.error(err.message)return}}letfileKey=''try{constformData=newFormData()formData.append('file',this.icoFile)formData.append('token',this.qiniuToken)const{key}=awaituploadImg2Qiniu(formData)fileKey=key//å‘é€è¯·æ±‚å°†keyå­˜åˆ°æ•°æ®åº“//...}catch(err){this.$message.error(err.message)}}}}&lt;/script&gt;&lt;stylelang=&quot;scss&quot;scope&gt;$icoSize:64px;.icon-uploader.el-upload{width:$icoSize;height:$icoSize;position:relative;overflow:hidden;border:1pxdashed#d9d9d9;border-radius:6px;cursor:pointer;position:relative;overflow:hidden;&amp;:hover{border-color:#409eff;}}.icon-uploader.ico{width:$icoSize;height:$icoSize;}.icon-uploader.el-upload.el-icon-plus{width:$icoSize;height:$icoSize;font-size:20px;color:#8c939d;line-height:$icoSize;text-align:center;}&lt;/style&gt;è·å–tokenåŠä¸Šä¼ å›¾ç‰‡importrequestfrom'@/utils/request'//è·å–åç«¯ç”Ÿæˆçš„tokenexportfunctiongetQiniuToken(){returnrequest({url:'/qntoken',method:'GET'})}exportfunctionuploadImg2Qiniu(formdata){returnrequest({//è¯¥apiä»ä¸ƒç‰›è·å–,ä¸åŒåœ°åŸŸçš„å­˜å‚¨æ¡¶å¯¹åº”apiä¸åŒurl:process.env.VUE_APP_QINIU_UPLOAD_API,method:'POST',headers:{'Content-Type':'multipart/form-data'},withCredentials:false,//ç¦æ­¢è·¨åŸŸæºå¸¦cookieï¼Œå¸¦cookieåœ¨ä¸ƒç‰›ä¸Šæœ‰å¯èƒ½å‡ºç°è·¨åŸŸé—®é¢˜timeout:30000,data:formdata})}","link":"https://blog.yguilai.com/post/elementui-zi-ding-yi-shang-chuan-yi-shang-chuan-tu-biao-dao-qi-niu-yun-wei-li/"}]}