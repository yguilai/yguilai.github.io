{"posts":[{"title":"Typescript泛型约束","content":"泛型约束就是使用一个类型和extends对泛型进行约束泛型约束例子:interfaceWithLength{length:number}constgetLength=&lt;TextendsWithLength&gt;(param:T):number=&gt;{returnparam.length}getLength(&quot;abcdefg&quot;)//7getLength([1,2,3])//3getLength({length:5})//5getLength(123)//error类型“123”的参数不能赋给类型“WithLength”的参数从上述例子可以看到,泛型变量T受到接口WithLenght的约束,不管它是什么类型,但必须有一个length属性.泛型约束中使用类型参数例子:constgetProp=(obj,propName)=&gt;{returnobj[propName]}constobj={a:'aaa',b:'bbb'}getProp(obj,'c')//undefined从上面这个例子可以看出,当获取这个对象的'c'属性时,就会得到undefined.这里我们就需要用到索引类型keyof结合泛型来实现对这个问题的检查constgetProp=&lt;T,KextendskeyofT&gt;(obj:T,propName:K)=&gt;{returnobj[propName]}constobj={a:'aaa',b:'bbb'}getProp(obj,'c')//类型“&quot;c&quot;”的参数不能赋给类型“&quot;a&quot;|&quot;b&quot;”的参数keyof可以理解为一个由泛型变量T的属性名构成的联合类型,因此K就被约束为了只能时'a'或'b',所传入字符串'c'时,ts就会检测出错误","link":"https://blog.yguilai.com/post/ZUto8nM6t/"},{"title":"Typescript中的类型断言","content":"两种写法,一种是&lt;type&gt;value,一种是valueastype例子:constgetStrLength=(target:string|number):number=&gt;{if((&lt;string&gt;targer).length){//这种写法在jsx中不支持,同时也是tslint不建议的写法return(targetasstring).length//建议写法}else{returntarget.toString().length}}","link":"https://blog.yguilai.com/post/Zwy9o_K7j/"},{"title":"Typescript中补充的六个类型","content":"元组元组可以看作是数组的拓展,它表示已知的元素数量和类型的数组通过lettuple:[string,number,boolean]的方式定义各个位置上的元素类型都要对应,元素个数也要一致枚举ts在es原有类型鸡出上加入枚举类型Any程序有时是多变的,有时我们在编写代码时并不能清楚的知道一个值到底时什么类型,这个时候就需要用到any类型,eg:letdom:any=document.getElementById('myId')可以在定义数组类型时使用any来指定数组中的元素类型为任意类型不应该滥用any类型,如果任何值都指定为any类型,那么typescript就变成了&quot;anyscript&quot;😂voidvoid和any相反,any表示任意类型,void则是表示没有任意类型定义函数,没有返回值时常用到void类型的变量只能赋值为undefined和nullnervernever类型指那些永不存在的类型除它自身外,任何类型都不能赋值给never类型unknownunknown和any很像,但是unknown相对与any是安全的拓展类型交叉类型使用&amp;符号定义,被&amp;符号链接的多个类型构成一个交叉类型联合类型联合类型是要求是要符合联合类型中任意一种类型即可,使用|符号定义","link":"https://blog.yguilai.com/post/zpYjIzrB_/"},{"title":"yarn create react-app 报错文件名、目录名或卷标语法不正确","content":"最近学习react,看官方文档利用yarn新建项目运行yarncreatereact-appmy-app直接报错看网上解决办法很多都是修改create-react-app.cmd,然后添加环境变量,感觉很不优雅查了很多资料后,发现主要原因是我用npm全局安装的yarn,导致yarn的bin目录与安装目录在不同分区🙄查看yarn的bin目录yarnglobalbin查看yarn的安装目录yarnglobaldir这里是我已经修改了的,原来是在C盘如果发现bin目录与安装目录不在同一个分区,就将yarn的安装位置修改到同一分区yarnconfigsetglobal-folder&quot;D:\\Develop\\yarn\\global&quot;yarnconfigsetcache-folder&quot;D:\\Develop\\yarn\\cache&quot;再运行yarncreatereact-appmy-app可以发现已经搞定了👌","link":"https://blog.yguilai.com/post/x1hPVO9h_/"},{"title":"Win10解决无法调节屏幕亮度问题","content":"网上找了很多方法,如:重装集显驱动、修改注册表,都没用如果安装了TeamViewer,向日葵之类的远程控制软件,会自动安装监视器驱动解决办法:Win+R打开运行窗口,输入devmgmt.msc,回车打开设备管理器面板,找到监视器可以发现监视器驱动显示为PnP-Monitor(Standard)(厂商为TeamViewer)或者GenericMonitor(orayOPMS)(厂商为向日葵)右键选中对应驱动,打开属性&gt;驱动程序&gt;更新驱动程序&gt;浏览计算机以查找驱动程序软件&gt;从计算机的设备驱动程序列表中选取&gt;选中通用即插即用监视器,点击下一步安装即可,最好重启一下电脑","link":"https://blog.yguilai.com/post/TKVP2Etmw/"},{"title":"Go日志库Zap与lumberjack配置","content":"packagecoreimport(&quot;go-gin-api-example/core/global&quot;&quot;go.uber.org/zap&quot;&quot;go.uber.org/zap/zapcore&quot;&quot;gopkg.in/natefinch/lumberjack.v2&quot;&quot;os&quot;&quot;strings&quot;)funcinitZapLogger(){varlogger*zap.Loggercore:=zapcore.NewCore(newZapEncoder(),newWriteSyncer(),newZapLevel())//setinitializefieldsfield:=zap.Fields(zap.String(&quot;ApplicationName&quot;,global.CONFIG.App.Name))//judgecurrentenvironmentispro?ifglobal.CONFIG.App.Env!=&quot;pro&quot;{//enabledevmodecaller:=zap.AddCaller()development:=zap.Development()logger=zap.New(core,caller,development,field)}else{logger=zap.New(core,field)}//saveasaglobalvariableglobal.LOG=logger}funcnewWriteSyncer()zapcore.WriteSyncer{if!global.CONFIG.Log.EnableLogFile{returnzapcore.NewMultiWriteSyncer(zapcore.AddSync(os.Stdout))}else{logConfig:=global.CONFIG.Loghook:=lumberjack.Logger{Filename:logConfig.File.Path+string(os.PathSeparator)+global.CONFIG.App.Name+&quot;.log&quot;,MaxSize:logConfig.File.MaxSize,MaxBackups:logConfig.File.MaxBackups,MaxAge:logConfig.File.MaxAge,Compress:logConfig.File.Compress,}returnzapcore.NewMultiWriteSyncer(zapcore.AddSync(os.Stdout),zapcore.AddSync(&amp;hook))}}funcnewZapEncoder()zapcore.Encoder{encoderCfg:=zapcore.EncoderConfig{TimeKey:&quot;time&quot;,LevelKey:&quot;level&quot;,NameKey:&quot;logger&quot;,CallerKey:&quot;lineNum&quot;,MessageKey:&quot;msg&quot;,StacktraceKey:&quot;stacktrace&quot;,LineEnding:zapcore.DefaultLineEnding,EncodeLevel:zapcore.CapitalLevelEncoder,//大写编码器EncodeTime:zapcore.ISO8601TimeEncoder,//ISO8601UTC时间格式EncodeDuration:zapcore.SecondsDurationEncoder,EncodeCaller:zapcore.ShortCallerEncoder,//短路径编码器EncodeName:zapcore.FullNameEncoder,}ifglobal.CONFIG.Log.Encoder==&quot;json&quot;{returnzapcore.NewJSONEncoder(encoderCfg)}else{returnzapcore.NewConsoleEncoder(encoderCfg)}}funcnewZapLevel()zap.AtomicLevel{levelMap:=map[string]zapcore.Level{&quot;DEBUG&quot;:zap.DebugLevel,&quot;INFO&quot;:zap.InfoLevel,&quot;WARN&quot;:zap.WarnLevel,&quot;ERROR&quot;:zap.ErrorLevel,&quot;DPANIC&quot;:zap.DPanicLevel,&quot;PANIC&quot;:zap.PanicLevel,&quot;FATAL&quot;:zap.FatalLevel,}level:=zap.NewAtomicLevel()ifl,ok:=levelMap[strings.ToUpper(global.CONFIG.Log.Level)];ok{level.SetLevel(l)}else{level.SetLevel(zap.InfoLevel)}returnlevel}","link":"https://blog.yguilai.com/post/L_yuiYNgS/"},{"title":"ElementUI自定义上传 -以上传图标到七牛云为例","content":"解决ElementUI上传组件无法获取内部文件列表的缺陷&lt;template&gt;&lt;div&gt;&lt;el-uploadaction=&quot;#&quot;class=&quot;icon-uploader&quot;:auto-upload=&quot;false&quot;:on-change=&quot;onIcoUploadChange&quot;:show-file-list=&quot;false&quot;accept=&quot;image/*&quot;&gt;&lt;imgv-if=&quot;imageUrl!==''&quot;:src=&quot;imageUrl&quot;class=&quot;ico&quot;/&gt;&lt;iv-elseclass=&quot;el-icon-plus&quot;/&gt;&lt;divslot=&quot;tip&quot;class=&quot;el-upload__tip&quot;&gt;只能上传图片文件，且不超过200kb&lt;/div&gt;&lt;/el-upload&gt;&lt;el-button@click=&quot;upload()&quot;&gt;上传&lt;/el-button&gt;&lt;/div&gt;&lt;/template&gt;&lt;script&gt;exportdefault{data(){return{icoFile:null,imageUrl:'',qiniuToken:''}},methods:{//获取上传的文件对象onIcoUploadChange(file,fileList){this.icoFile=file//创建一个本地blob链接用于图片预览this.imageUrl=URL.createObjectURL(file.raw)},//上传文件到七牛asyncupload(){if(this.icoFile===null){this.$message.error('请先上传文件')return}//判断token是否为空if(this.qiniuToken===''){try{const{data}=awaitgetQiniuToken()this.qiniuToken=data}catch(err){this.$message.error(err.message)return}}letfileKey=''try{constformData=newFormData()formData.append('file',this.icoFile)formData.append('token',this.qiniuToken)const{key}=awaituploadImg2Qiniu(formData)fileKey=key//发送请求将key存到数据库//...}catch(err){this.$message.error(err.message)}}}}&lt;/script&gt;&lt;stylelang=&quot;scss&quot;scope&gt;$icoSize:64px;.icon-uploader.el-upload{width:$icoSize;height:$icoSize;position:relative;overflow:hidden;border:1pxdashed#d9d9d9;border-radius:6px;cursor:pointer;position:relative;overflow:hidden;&amp;:hover{border-color:#409eff;}}.icon-uploader.ico{width:$icoSize;height:$icoSize;}.icon-uploader.el-upload.el-icon-plus{width:$icoSize;height:$icoSize;font-size:20px;color:#8c939d;line-height:$icoSize;text-align:center;}&lt;/style&gt;获取token及上传图片importrequestfrom'@/utils/request'//获取后端生成的tokenexportfunctiongetQiniuToken(){returnrequest({url:'/qntoken',method:'GET'})}exportfunctionuploadImg2Qiniu(formdata){returnrequest({//该api从七牛获取,不同地域的存储桶对应api不同url:process.env.VUE_APP_QINIU_UPLOAD_API,method:'POST',headers:{'Content-Type':'multipart/form-data'},withCredentials:false,//禁止跨域携带cookie，带cookie在七牛上有可能出现跨域问题timeout:30000,data:formdata})}","link":"https://blog.yguilai.com/post/elementui-zi-ding-yi-shang-chuan-yi-shang-chuan-tu-biao-dao-qi-niu-yun-wei-li/"}]}