<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8" />

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<meta name="keywords" content="燕归来博客">
<meta name="description" content="温故而知新">
<meta name="theme-color" content="#000">
<title>Win10解决无法调节屏幕亮度问题 | 燕归来博客</title>
<link rel="shortcut icon" href="/favicon.ico?v=1591798848947">
<link rel="stylesheet" href="/styles/main.css">
<link rel="stylesheet" href="/media/css/pisces.css">

<link rel="stylesheet" href="/media/fonts/font-awesome.css">
<link
  href="//fonts.googleapis.com/css?family=Monda:300,300italic,400,400italic,700,700italic|Roboto Slab:300,300italic,400,400italic,700,700italic|Rosario:300,300italic,400,400italic,700,700italic|PT Mono:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext"
  rel="stylesheet" type="text/css">

<link href="/media/hljs/styles/monokai-sublime.css"
  rel="stylesheet">

<script src="/media/hljs/highlight.js"></script>
<script src="https://cdn.jsdelivr.net/npm/velocity-animate@1.5.0/velocity.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/velocity-animate@1.5.0/velocity.ui.min.js"></script>

<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>



  <meta name="description" content="Win10解决无法调节屏幕亮度问题" />
  <meta name="keywords" content="Win10" />
</head>

<body>
  <div class="head-top-line"></div>
  <div class="header-box">
    
<div class="pisces">
  <header class="header  ">
    <div class="blog-header box-shadow-wrapper bg-color " id="header">
      <div class="nav-toggle" id="nav_toggle">
        <div class="toggle-box">
          <div class="line line-top"></div>
          <div class="line line-center"></div>
          <div class="line line-bottom"></div>
        </div>
      </div>
      <div class="site-meta">       
        <div class="site-title">
          
            <a href="/" class="brand">
              <span>燕归来博客</span>
            </a>  
          
        </div>
        
          <p class="subtitle">温故而知新</p>
        
      </div>
      <nav class="site-nav" id="site_nav">
        <ul id="nav_ul">
          
            
            
              
            
            <li class="nav-item ">
              
              
                <a href="/" target="_self">
                  <i class="fa fa-home"></i> 首页
                </a>
              
            </li>
          
            
            
              
            
            <li class="nav-item ">
              
              
                <a href="/archives/" target="_self">
                  <i class="fa fa-archive"></i> 归档
                </a>
              
            </li>
          
            
            
              
            
            <li class="nav-item ">
              
              
                <a href="/tags/" target="_self">
                  <i class="fa fa-tags"></i> 标签
                </a>
              
            </li>
          
          
            
              <li class="nav-item ">
                <a href="/friends/" target="_self">
                  
                    <i class="fa fa-address-book"></i> 友链
                  
                </a>
              </li>
            
          
        </ul>
      </nav>
    </div>
  </header>
</div>

<script type="text/javascript"> 
 
  let showNav = true;

  let navToggle = document.querySelector('#nav_toggle'),
  siteNav = document.querySelector('#site_nav');
  
  function navClick() {
    let sideBar = document.querySelector('.sidebar');
    let navUl = document.querySelector('#nav_ul');
    navToggle.classList.toggle('nav-toggle-active');
    siteNav.classList.toggle('nav-menu-active');
    if (siteNav.classList.contains('nav-menu-active')) {
      siteNav.style = "height: " + (navUl.children.length * 42) +"px !important";
    } else {
      siteNav.style = "";
    }
  }

  navToggle.addEventListener('click',navClick);  
</script>
  </div>
  <div class="main-continer">
    
    <div
      class="section-layout pisces ">
      <div class="section-layout-wrapper">
        

<div class="sidebar">
  
    <div class="sidebar-box box-shadow-wrapper bg-color right-motion" id="sidebar">
      
        <div class="post-list-sidebar">
          <div class="sidebar-title">
            <span id="tocSideBar" class="sidebar-title-item sidebar-title-active">文章目录</span>
            <span id="metaSideBar" class="sidebar-title-item">站点概览</span>
          </div>
        </div>
      
      <div class="sidebar-body pisces" id="sidebar_body">
        
          
            
<div class="sidebar-wrapper box-shadow-wrapper bg-color">
  <div class="sidebar-item">
    <img class="site-author-image right-motion" src="/images/avatar.png"/>
    <p class="site-author-name">燕归来</p>
    
  </div>
  <div class="sidebar-item side-item-stat right-motion">
    <div class="sidebar-item-box">
      <a href="/archives/">
        
        <span class="site-item-stat-count">9</span>
        <span class="site-item-stat-name">文章</span>
      </a>
    </div>
    <div class="sidebar-item-box">
      <a href="">
        <span class="site-item-stat-count">7</span>
        <span class="site-item-stat-name">分类</span>
      </a>
    </div>
    <div class="sidebar-item-box">
      <a href="/tags/">
        <span class="site-item-stat-count">7</span>
        <span class="site-item-stat-name">标签</span>
      </a>
    </div>
  </div>
  
    
      <div class="sidebar-item" style="border-top: 1px dotted #ccc; margin-top: 10px;">
      </div>
    
  
  
    <div class="sidebar-item sidebar-item-social">
      <div class="social-item">
        
          
            <a href="https://github.com/yguilai">
              <i class="fa fa-github" title="Github"></i>
            </a>
          
        
        
      </div>
    </div>
  


</div>
          
        
      </div>
    </div>
  
</div>
<script>
  const SIDEBAR_TITLE_ACTIVE = 'sidebar-title-active';
  const SIDEBAR_BODY_ACTIVE = 'sidebar-body-active';
  const SLIDE_UP_IN = 'slide-up-in';

  let sidebar = document.querySelector('#sidebar'),
  tocSideBar = document.querySelector('#tocSideBar'),
  metaSideBar = document.querySelector('#metaSideBar'),
  postToc = document.querySelector('#post_toc'),
  postSiteMeta = document.querySelector('#post_side_meta'),
  sidebarTitle = document.querySelector('.sidebar-title'),
  sidebarBody = document.querySelector('#sidebar_body');

  tocSideBar && tocSideBar.addEventListener('click', (e) => {
    toggleSidebar(e);
  });

  metaSideBar && metaSideBar.addEventListener('click', (e) => {
    toggleSidebar(e);
  });

  function toggleSidebar(e) {
    let currentTitle = document.querySelector("."+SIDEBAR_TITLE_ACTIVE);
    if (currentTitle == e.srcElement) {
      return ;
    }
    let current, showElement, hideElement;
    if (e.srcElement == metaSideBar) {
      showElement = postSiteMeta;
      hideElement = postToc;
    } else if (e.srcElement == tocSideBar){
      showElement = postToc;
      hideElement = postSiteMeta;
    }
    currentTitle.classList.remove(SIDEBAR_TITLE_ACTIVE);
    e.srcElement.classList.add(SIDEBAR_TITLE_ACTIVE);

    window.Velocity(hideElement, 'stop');
    window.Velocity(hideElement, 'transition.slideUpOut', {
      display: 'none',
      duration: 200,
      complete: function () {
        window.Velocity(showElement, 'transition.slideDownIn', {
          duration: 200
        });
      }
    })
    hideElement.classList.remove(SIDEBAR_BODY_ACTIVE);
    showElement.classList.add(SIDEBAR_BODY_ACTIVE);
  }

  postToc && postToc.addEventListener('transitionend', function() {
    this.classList.remove(SLIDE_UP_IN);
  });

  if (sidebarBody) {
    if (sidebarBody.classList.contains('pisces') || sidebarBody.classList.contains('gemini')) {
      let hasFix = false;
      let scrollEl = document.querySelector('.main-continer');
      let limitTop = document.querySelector('#nav_ul').children.length * 42 + 162;
      window.addEventListener('scroll', function(e) {
        if (document.scrollingElement.scrollTop >= limitTop) {
          if (!hasFix) {
            sidebar.classList.add('sidebar-fixed');
            hasFix = true;
          }
        } else {
          if (hasFix) {
            sidebar.classList.remove('sidebar-fixed');
            hasFix = false;
          }
        }
      });
    }
  }
  
</script>
        <div class="section-box box-shadow-wrapper">
          <div class="section bg-color post post-page">
            <header class="post-header">
  <h1 class="post-title">
    <a class="post-title-link" href="https://blog.yguilai.com/post/TKVP2Etmw/">
      Win10解决无法调节屏幕亮度问题
    </a>
  </h1>
  <div class="post-meta">
    
    <span class="meta-item pc-show">
      <i class="fa fa-calendar-o"></i>
      <span>发布于</span>
      <span>2020-05-20</span>
      <span class="post-meta-divider pc-show">|</span>
    </span>
    
    <span class="meta-item">
      <i class="fa fa-folder-o"></i>
      <span class="pc-show">分类于</span>
      
      
      <a href="https://blog.yguilai.com/tag/zixpeIzkI/">
        <span>Win10</span>
      </a>
      
      
    </span>
    <span class="post-meta-divider">|</span>
    
    <span class="meta-item">
      <i class="fa fa-clock-o"></i>
      <span>1分钟</span>
    </span>
    <span class="meta-item">
      <span class="post-meta-divider">|</span>
      <i class="fa fa-file-word-o"></i>
      <span>198<span class="pc-show">字数</span></span>
    </span>
    
  </div>
</header>
            <div class="post-body next-md-body" id="post_body">
              <p>网上找了很多方法, 如: 重装集显驱动、修改注册表, 都没用</p>
<!-- more -->
<p>如果安装了TeamViewer, 向日葵之类的远程控制软件, 会自动安装监视器驱动</p>
<p>解决办法:<br>
Win+R打开运行窗口, 输入<code>devmgmt.msc</code>, 回车打开设备管理器面板, 找到监视器</p>
<p>可以发现监视器驱动显示为<code>PnP-Monitor(Standard)</code> (厂商为TeamViewer) 或者<code>Generic Monitor (orayOPMS)</code>(厂商为向日葵)<br>
<img src="https://blog.yguilai.com/post-images/1589976540518.jpg" alt="" loading="lazy"></p>
<p>右键选中对应驱动, 打开<code>属性</code> &gt; <code>驱动程序</code> &gt; <code>更新驱动程序</code> &gt; <code>浏览计算机以查找驱动程序软件</code> &gt; <code>从计算机的设备驱动程序列表中选取</code> &gt; 选中<code>通用即插即用监视器</code>, 点击下一步安装即可, 最好重启一下电脑</p>

            </div>
            <div class="post-footer">
  <ul class="post-copyright">
    <li class="post-copyright-author">
      <strong>本文作者：</strong>
      燕归来
    </li>
    <li class="post-copyright-link">
      <strong>本文链接：</strong>
      <a href="https://blog.yguilai.com/post/TKVP2Etmw/" title="Win10解决无法调节屏幕亮度问题">https://blog.yguilai.com/post/TKVP2Etmw/</a>
    </li>
    <li class="post-copyright-license">
      <strong>版权声明： </strong>
      本博客所有文章除特别声明外，均采用<a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="noopener" target="_blank"><i class="fa fa-fw fa-creative-commons"></i> BY-NC-SA</a> 许可协议。转载请注明出处！
    </li>
  </ul>
  <div class="tags">
    
      <a href="https://blog.yguilai.com/tag/zixpeIzkI/"># Win10</a>
    
  </div>
  <div class="nav">
    <div class="nav-prev">
      
        <i class="fa fa-chevron-left"></i>
        <a class="nav-pc-next" title="yarn create react-app 报错文件名、目录名或卷标语法不正确" href="https://blog.yguilai.com/post/x1hPVO9h_/">yarn create react-app 报错文件名、目录名或卷标语法不正确</a class="nav-pc-next">
        <a class="nav-mobile-prev" title="yarn create react-app 报错文件名、目录名或卷标语法不正确" href="https://blog.yguilai.com/post/x1hPVO9h_/">上一篇</a>
      
    </div>
    <div class="nav-next">
      
        <a class="nav-pc-next" title="Go日志库Zap与lumberjack配置" href="https://blog.yguilai.com/post/L_yuiYNgS/">Go日志库Zap与lumberjack配置</a>
        <a class="nav-mobile-next" title="Go日志库Zap与lumberjack配置" href="https://blog.yguilai.com/post/L_yuiYNgS/">下一篇</a>
        <i class="fa fa-chevron-right"></i>
      
    </div>
  </div>
</div>
            
  
    
    
      <link rel="stylesheet" href="https://unpkg.com/disqusjs@1.1/dist/disqusjs.css">
<script src="https://unpkg.com/disqusjs@1.1/dist/disqus.js"></script>

<div id="disqus_thread"></div>

<script>
  var options = {
    shortname: 'ygl',
    apikey: '55DoSz0mmxOvjpqatDAyqd6bY01BaG67eWjH87hNxjK5uFzxet0Loc2zIuBntKxa',
  }
  if ('https://blog.yguilai.com/disqus') {
    options.api = 'https://blog.yguilai.com/disqus'
  }
  var dsqjs = new DisqusJS(options)
</script>
    
  

          </div>
        </div>
      </div>
    </div>
    <div class="footer-box">
  <footer class="footer">
    <div class="copyright">
      Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a> | © 2019-2020 Theme By <a href="https://github.com/hsxyhao/gridea-theme-next" target="_blank">HsxyHao</a>
    </div>
    <div class="poweredby">
      <a href="http://beian.miit.gov.cn/" target="_blank">湘ICP备18009312号-3</a>
    </div>
  </footer>
  
  
  <div class="pisces back-to-top" id="back_to_top">
    <i class="fa fa-arrow-up"></i>
    
    <span class="scrollpercent">
      <span id="back_to_top_text">0</span>%
    </span>
    
  </div>
  
  
  
</div>
<script>

  let sideBarOpen = 'sidebar-open';
  let body = document.body;
  let back2Top = document.querySelector('#back_to_top'),
  back2TopText = document.querySelector('#back_to_top_text'),
  drawerBox = document.querySelector('#drawer_box'),
  rightSideBar = document.querySelector('.sidebar'),
  viewport = document.querySelector('body');

  function scrollAnimation(currentY, targetY) {
   
    let needScrollTop = targetY - currentY
    let _currentY = currentY
    setTimeout(() => {
      const dist = Math.ceil(needScrollTop / 10)
      _currentY += dist
      window.scrollTo(_currentY, currentY)
      if (needScrollTop > 10 || needScrollTop < -10) {
        scrollAnimation(_currentY, targetY)
      } else {
        window.scrollTo(_currentY, targetY)
      }
    }, 1)
  }

  back2Top.addEventListener("click", function(e) {
    scrollAnimation(document.scrollingElement.scrollTop, 0);
    e.stopPropagation();
    return false;
  });
  
  window.addEventListener('scroll', function(e) {
    let percent = document.scrollingElement.scrollTop / (document.scrollingElement.scrollHeight - document.scrollingElement.clientHeight) * 100;
    if (percent > 1 && !back2Top.classList.contains('back-top-active')) {
      back2Top.classList.add('back-top-active');
    }
    if (percent == 0) {
      back2Top.classList.remove('back-top-active');
    }
    if (back2TopText) {
      back2TopText.textContent = Math.floor(percent);
    }
  });

  
  let hasCacu = false;
  window.onresize = function() {
    if (window.width > 991) {
      calcuHeight();
    } else {
      hasCacu = false;
    }
  }

  function calcuHeight() {
    // 动态调整站点概览高度
    if (!hasCacu && back2Top.classList.contains('pisces') || back2Top.classList.contains('gemini')) {
      let sideBar = document.querySelector('.sidebar');
      let navUl = document.querySelector('#site_nav');
      sideBar.style = 'margin-top:' + (navUl.offsetHeight + navUl.offsetTop + 15) + 'px;';
      hasCacu = true;
    }
  }
  calcuHeight();
  
  let open = false, MOTION_TIME = 300, RIGHT_MOVE_DIS = '320px';

  if (drawerBox) {
    let rightMotions = document.querySelectorAll('.right-motion');
    let right = drawerBox.classList.contains('right');

    let transitionDir = right ? "transition.slideRightIn" : "transition.slideLeftIn";

    let openProp, closeProp;
    if (right) {
      openProp = {
        paddingRight: RIGHT_MOVE_DIS 
      };
      closeProp = {
        paddingRight: '0px'
      };
    } else {
      openProp = {
        paddingLeft: RIGHT_MOVE_DIS 
      };
      closeProp = {
        paddingLeft: '0px'
      };
    }

    drawerBox.onclick = function() {
      open = !open;
      window.Velocity(rightSideBar, 'stop');
      window.Velocity(viewport, 'stop');
      window.Velocity(rightMotions, 'stop');
      if (open) {
        window.Velocity(rightSideBar, {
          width: RIGHT_MOVE_DIS
        }, {
          duration: MOTION_TIME,
          begin: function() {
            window.Velocity(rightMotions, transitionDir,{ });
          }
        })
        window.Velocity(viewport, openProp,{
          duration: MOTION_TIME
        });
      } else {
        window.Velocity(rightSideBar, {
          width: '0px'
        }, {
          duration: MOTION_TIME,
          begin: function() {
            window.Velocity(rightMotions, {
              opacity: 0
            });
          }
        })
        window.Velocity(viewport, closeProp ,{
          duration: MOTION_TIME
        });
      }
      for (let i = 0; i < drawerBox.children.length; i++) {
        drawerBox.children[i].classList.toggle('muse-line');
      }
      drawerBox.classList.toggle(sideBarOpen);
    }
  }

  // 链接跳转
  let newWindow = 'false'
  if (newWindow === 'true') {
    let links = document.querySelectorAll('.post-body a')
    links.forEach(item => {
      if (!item.classList.contains('btn')) {
        item.setAttribute("target","_blank");
      }
    })
  }
  // 代码高亮
  hljs.initHighlightingOnLoad();

</script>
    <div class="light-box" id="light_box"></div>
<script>
  let imgs = document.querySelectorAll('.post-body img');
  let lightBox = document.querySelector('#light_box');
  lightBox.addEventListener('mousedown', (e) => {
    e.preventDefault()
  })
  lightBox.addEventListener('mousewheel', (e) => {
    e.preventDefault()
  })
  let width = window.innerWidth * 0.8;
  lightBox.onclick = () => {
    let img = lightBox.querySelector('img');
    lightBox.style = '';
    img && img.remove();
  }
  imgs.forEach(item => {
    item.onclick = function (e) {
      let lightImg = document.createElement('img');
      lightImg.src = this.src;
      lightBox.style = `height: 100%; opacity: 1; background-color: rgba(0, 0, 0, 0.5);cursor: zoom-out;`;
      lightImg.style = `width: ${width}px; border: 1px solid #fff; border-radius: 2px;`;
      lightImg.onclick = function () {
        lightBox.style = '';
        this.remove();
      }
      lightBox.append(lightImg);
    }
  })
</script>
  </div>
</body>
<input hidden id="copy" />
<script>
  //拿来主义(真香)^_^，Clipboard 实现摘自掘金 https://juejin.im/post/5aefeb6e6fb9a07aa43c20af
  window.Clipboard = (function (window, document, navigator) {
    var textArea,
      copy;

    // 判断是不是ios端
    function isOS() {
      return navigator.userAgent.match(/ipad|iphone/i);
    }
    //创建文本元素
    function createTextArea(text) {
      textArea = document.createElement('textArea');
      textArea.value = text;
      textArea.style.width = 0;
      textArea.style.height = 0;
      textArea.clientHeight = 0;
      textArea.clientWidth = 0;
      document.body.appendChild(textArea);
    }
    //选择内容
    function selectText() {
      var range,
        selection;

      if (isOS()) {
        range = document.createRange();
        range.selectNodeContents(textArea);
        selection = window.getSelection();
        selection.removeAllRanges();
        selection.addRange(range);
        textArea.setSelectionRange(0, 999999);
      } else {
        textArea.select();
      }
    }

    //复制到剪贴板
    function copyToClipboard() {
      try {
        document.execCommand("Copy")
      } catch (err) {
        alert("复制错误！请手动复制！")
      }
      document.body.removeChild(textArea);
    }

    copy = function (text) {
      createTextArea(text);
      selectText();
      copyToClipboard();
    };

    return {
      copy: copy
    };
  })(window, document, navigator);

  function copyCode(e) {
    if (e.srcElement.tagName === 'SPAN' && e.srcElement.classList.contains('copy-code')) {
      let code = e.currentTarget.querySelector('code');
      var text = code.innerText;
      if (e.srcElement.textContent === '复制成功') {
        console.log('复制操作频率过高');
        return;
      }
      e.srcElement.textContent = '复制成功';
      (function (elem) {
        setTimeout(() => {
          if (elem.textContent === '复制成功') {
            elem.textContent = '复制代码'
          }
        }, 1000);
      })(e.srcElement)
      Clipboard.copy(text);
    }
  }

  let pres = document.querySelectorAll('pre');
  pres.forEach(pre => {
    let code = pre.querySelector('code');
    let copyElem = document.createElement('span');
    copyElem.classList.add('copy-code');
    copyElem.textContent = '复制代码';
    pre.appendChild(copyElem);
    pre.onclick = copyCode
  })
</script>
<script src="/media/js/motion.js"></script>

<script src="https://cdn.jsdelivr.net/gh/cferdinandi/smooth-scroll/dist/smooth-scroll.polyfills.min.js"></script>
<script>
  var scroll = new SmoothScroll('a[href*="#"]', {
    speed: 500
  });
</script>

<!-- <div class="search-mask" id="search_mask">
  <div class="search-box">
    <div class="search-title">
      <i class="fa fa-search"></i>
      <div class="input-box">
        <input type="text" placeholder="搜索">
      </div>
      <i class="fa fa-times-circle"></i>
    </div>
    <div class="result">
      
      <div class="item">
        <a class="result-title" href="https://blog.yguilai.com/post/ojQKZXlfE/"" data-c="
          &lt;p&gt;直接上代码&lt;/p&gt;
&lt;h4 id=&#34;安装依赖&#34;&gt;安装依赖&lt;/h4&gt;
&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;yarn add axios # 或者 npm install axios -S
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&#34;encapsulation&#34;&gt;Encapsulation&lt;/h4&gt;
&lt;pre&gt;&lt;code class=&#34;language-ts&#34;&gt;// config/index.ts
export default {
  api: {
    devApiBaseUrl: &#39;/&#39;,             // 开发环境base url
    proApiBaseUrl: &#39;/api/v1&#39;   // 生产环境base url
  }
}
&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code class=&#34;language-ts&#34;&gt;// utils/request.ts
import axios, {AxiosInstance, AxiosRequestConfig, AxiosPromise, AxiosResponse} from &#39;axios&#39;
import config from &#39;@/config&#39;

const {api: {devApiBaseUrl, proApiBaseUrl}} = config
const apiBaseUrl = process.env.NODE_ENV === &#39;production&#39; ? proApiBaseUrl : devApiBaseUrl

// 修改默认的content-type
axios.defaults.headers.post[&#39;Content-Type&#39;] = &#39;application/x-www-form-urlencoded&#39;

/**
 * 统一返回的数据格式, 根据具体业务修改
 */
export interface ResponseData {
  code: number
  msg: string
  data?: any
}

class HttpRequest {
  constructor(public baseUrl: string = apiBaseUrl) {
    this.baseUrl = baseUrl
  }

  public request(options: AxiosRequestConfig): AxiosPromise {
    const instance: AxiosInstance = axios.create()
    options = this.mergeConfig(options)
    this.interceptors(instance, options.url)
    return instance(options)
  }

  /**
   * 配置拦截器
   * @param instance
   * @param url
   */
  private interceptors(instance: AxiosInstance, url?: string) {
    instance.interceptors.request.use((config: AxiosRequestConfig) =&amp;gt; {
      // 可以在这配置token 请求头
      return config
    }, error =&amp;gt; Promise.reject(error))

    instance.interceptors.response.use((res: AxiosResponse) =&amp;gt; {
      const {data} = res
      const {code, msg} = data
      // 这里设置返回状态码为0表示成功, 请根据具体业务修改
      if (code !== 0) {
        // TODO 使用消息窗提示错误
        console.error(msg)
      }
      return res
    }, error =&amp;gt; Promise.reject(error))
  }

  /**
   * 合并基础配置
   * @param options
   */
  private mergeConfig(options: AxiosRequestConfig): AxiosRequestConfig {
    return Object.assign({baseURL: this.baseUrl}, options)
  }
}

export default HttpRequest
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&#34;how-to-use&#34;&gt;How to use&lt;/h4&gt;
&lt;pre&gt;&lt;code class=&#34;language-ts&#34;&gt;// api/index.ts
import HttpRequest from &amp;quot;@/utils/request&amp;quot;
export * from &#39;@/utils/request&#39;
export default new HttpRequest()
&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code class=&#34;language-ts&#34;&gt;// api/user.ts
import axios, {ResponseData} from &#39;./index&#39;
import {AxiosPromise} from &#39;axios&#39;

interface LoginReqArgInterface {
  username: string
  password: number | string
}

// 传入泛型变量ResponseData, 可以在操作返回结果集时, 获得代码提示
export const loginApi = (data: LoginReqArgInterface): AxiosPromise&amp;lt;ResponseData&amp;gt; =&amp;gt; {
  return axios.request({
    url: &#39;/user/login&#39;,
    data,
    method: &#39;POST&#39;
  })
}
&lt;/code&gt;&lt;/pre&gt;
">Typescript之封装Axios</a>
      </div>
      
      <div class="item">
        <a class="result-title" href="https://blog.yguilai.com/post/oiRKwJIS-/"" data-c="
          &lt;!-- more --&gt;
&lt;h3 id=&#34;tsconfigjson的可配置项&#34;&gt;tsconfig.json的可配置项&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&#34;language-json&#34;&gt;{
    &amp;quot;compileOnSave&amp;quot;: true,
    &amp;quot;files&amp;quot;: [],
    &amp;quot;include&amp;quot;: [],
    &amp;quot;exclude&amp;quot;: [],
    &amp;quot;extends&amp;quot;: &amp;quot;&amp;quot;,
    &amp;quot;compilerOptions&amp;quot;: {}
}
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;compileonsave&#34;&gt;&lt;code&gt;compileOnSave&lt;/code&gt;&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;compileOnSave&lt;/code&gt;的值是&lt;code&gt;true&lt;/code&gt;或&lt;code&gt;false&lt;/code&gt;. 如果设为&lt;code&gt;true&lt;/code&gt;, 在编辑文件保存的时候, 编辑器会根据&lt;code&gt;tsconfig.json&lt;/code&gt;的配置重新生成文件.(需要编辑器支持)&lt;/p&gt;
&lt;h3 id=&#34;files&#34;&gt;&lt;code&gt;files&lt;/code&gt;&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;files&lt;/code&gt;可以配置一个数组列表, 里面包含指定文件的相对或绝对路径. 编译器在编译ide时候只会编译包含在files中列出的文件. 如果不指定, 则取决于有没有设置&lt;code&gt;include&lt;/code&gt;选项; 如果没有&lt;code&gt;include&lt;/code&gt;选项, 则默认会编译根目录以及所有子目录的文件. 这里列出的路径必须是指定文件, 而不是某个文件夹, 而且不能使用&lt;code&gt;*&lt;/code&gt;、&lt;code&gt;?&lt;/code&gt;、&lt;code&gt;**/&lt;/code&gt;等通配符&lt;/p&gt;
&lt;h3 id=&#34;include&#34;&gt;&lt;code&gt;include&lt;/code&gt;&lt;/h3&gt;
&lt;p&gt;指定要编译的路径列表，但和 files 的区别在于，这里的路径可以是文件夹，也可以是文件，可以使&lt;br&gt;
用相对和绝对路径，而且可以使用通配符. 比如 &amp;quot;./src&amp;quot; 即表示要编译 src 文件夹下的所有文件以及子文件夹的文件.&lt;/p&gt;
&lt;h3 id=&#34;exclude&#34;&gt;&lt;code&gt;exclude&lt;/code&gt;&lt;/h3&gt;
&lt;p&gt;表示要排除的、不编译的文件，它也可以指定一个列表，规则和 include 一样，可以是文件可以是文件夹, 可以是相对路径或绝对路径，可以使用通配符.&lt;/p&gt;
&lt;h3 id=&#34;extends&#34;&gt;&lt;code&gt;extends&lt;/code&gt;&lt;/h3&gt;
&lt;p&gt;通过指定一个其它的 tsconfig.json 文件路径，来继承这个配置文件里的配置，继承来的文件配置会覆&lt;br&gt;
盖当前文件定义的配置. TS在 3.2版本开始，支持继承一个来自 Node.js包的tsconfig.json 配置文件.&lt;/p&gt;
&lt;h3 id=&#34;compileroptions&#34;&gt;&lt;code&gt;compilerOptions&lt;/code&gt;&lt;/h3&gt;
&lt;p&gt;包含很多可配置项, 用来设置编译选项.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;target&lt;br&gt;
用于指定编译之后的版本目标, 可选值有: &lt;code&gt;ES3（默认值）&lt;/code&gt;、&lt;code&gt;ES5&lt;/code&gt;、&lt;code&gt;ES2015&lt;/code&gt;、&lt;code&gt;ES2016&lt;/code&gt;、&lt;code&gt;ES2017&lt;/code&gt;、&lt;code&gt;ESNEXT&lt;/code&gt;. 如果不配置, 则默认使用ES3版本, 如果设为ESNEXT, 则使用最新的ES规范版本.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;module&lt;br&gt;
用于指定要使用的模块标准, 可选值: &lt;code&gt;commonjs&lt;/code&gt;、&lt;code&gt;amd&lt;/code&gt;、&lt;code&gt;system&lt;/code&gt;、&lt;code&gt;umd&lt;/code&gt;、&lt;code&gt;s2015(或写 es6)&lt;/code&gt;. 如果不设置module选项, 则判断&lt;code&gt;target&lt;/code&gt;选项, 如果&lt;code&gt;target&lt;/code&gt;渲染设为&lt;code&gt;ES6&lt;/code&gt;, 则module默认为&lt;code&gt;ES6&lt;/code&gt;, 否则就是&lt;code&gt;commonjs&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;lib&lt;br&gt;
用于指定要包含在编译中的库文件, 如果你要使用一些ES6的新语法, 则需要引入ES6/ES2015这个库, 如果没有指定 lib 配置，默认会加载一些库，而加载什么库是受 target 影响的。如果 target 为ES5，默认包含的库有 DOM、 ES5 和 ScriptHost ；如果 target 是 ES6，默认引入的库有DOM、ES6、DOM.Iterable 和 ScriptHost.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;allowJs&lt;br&gt;
allowJs 设置的值为 true 或 false，用来指定是否允许编译 JS 文件，默认是 false，即不编译 JS 文件.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;p&gt;未完待续...&lt;/p&gt;
">Typescript之tsconfig.json配置</a>
      </div>
      
      <div class="item">
        <a class="result-title" href="https://blog.yguilai.com/post/ZUto8nM6t/"" data-c="
          &lt;p&gt;泛型约束就是使用一个类型和extends对泛型进行约束&lt;/p&gt;
&lt;!-- more --&gt;
&lt;h3 id=&#34;泛型约束&#34;&gt;泛型约束&lt;/h3&gt;
&lt;p&gt;例子:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-ts&#34;&gt;interface WithLength {
    length: number
}
const getLength = &amp;lt;T extends WithLength&amp;gt;(param: T): number =&amp;gt; {
    return param.length
}
getLength(&amp;quot;abcdefg&amp;quot;)    // 7
getLength([1, 2, 3])        // 3
getLength({ length: 5 }) // 5
getLength(123)             // error 类型“123”的参数不能赋给类型“WithLength”的参数
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;从上述例子可以看到, 泛型变量&lt;code&gt;T&lt;/code&gt;受到接口&lt;code&gt;WithLenght&lt;/code&gt;的约束, 不管它是什么类型, 但必须有一个length属性.&lt;/p&gt;
&lt;h3 id=&#34;泛型约束中使用类型参数&#34;&gt;泛型约束中使用类型参数&lt;/h3&gt;
&lt;p&gt;例子:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-ts&#34;&gt;const getProp = (obj, propName) =&amp;gt; {
    return obj[propName]
}
const obj = { a: &#39;aaa&#39;, b: &#39;bbb&#39; }
getProp(obj, &#39;c&#39;)   // undefined
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;从上面这个例子可以看出, 当获取这个对象的&lt;code&gt;&#39;c&#39;&lt;/code&gt;属性时, 就会得到&lt;code&gt;undefined&lt;/code&gt;. 这里我们就需要用到索引类型&lt;code&gt;keyof&lt;/code&gt;结合泛型来实现对这个问题的检查&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-ts&#34;&gt;const getProp = &amp;lt;T, K extends keyof T&amp;gt;(obj: T, propName: K) =&amp;gt; {
    return obj[propName]
}
const obj = { a: &#39;aaa&#39;, b: &#39;bbb&#39; }
getProp(obj, &#39;c&#39;)   // 类型“&amp;quot;c&amp;quot;”的参数不能赋给类型“&amp;quot;a&amp;quot; | &amp;quot;b&amp;quot;”的参数
&lt;/code&gt;&lt;/pre&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;keyof&lt;/code&gt;可以理解为一个由泛型变量&lt;code&gt;T&lt;/code&gt;的属性名构成的联合类型, 因此&lt;code&gt;K&lt;/code&gt;就被约束为了只能时&lt;code&gt;&#39;a&#39;&lt;/code&gt;或&lt;code&gt;&#39;b&#39;&lt;/code&gt;, 所传入字符串&lt;code&gt;&#39;c&#39;&lt;/code&gt;时, ts就会检测出错误&lt;/p&gt;
&lt;/blockquote&gt;
">Typescript之泛型约束</a>
      </div>
      
      <div class="item">
        <a class="result-title" href="https://blog.yguilai.com/post/Zwy9o_K7j/"" data-c="
          &lt;p&gt;两种写法, 一种是&lt;code&gt;&amp;lt;type&amp;gt;value&lt;/code&gt;, 一种是&lt;code&gt;value as type&lt;/code&gt;&lt;/p&gt;
&lt;!-- more --&gt;
&lt;p&gt;例子:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-typescript&#34;&gt;const getStrLength = (target: string | number): number =&amp;gt; {
    if ((&amp;lt;string&amp;gt;targer).length) {  // 这种写法在jsx中不支持, 同时也是tslint不建议的写法
        return (target as string).length    // 建议写法
    } else {
        return target.toString().length
    }
}
&lt;/code&gt;&lt;/pre&gt;
">Typescript之类型断言</a>
      </div>
      
      <div class="item">
        <a class="result-title" href="https://blog.yguilai.com/post/zpYjIzrB_/"" data-c="
          &lt;!-- more --&gt;
&lt;h4 id=&#34;元组&#34;&gt;元组&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;元组可以看作是数组的拓展, 它表示已知的元素数量和类型的数组&lt;/li&gt;
&lt;li&gt;通过&lt;code&gt;let tuple: [string, number, boolean]&lt;/code&gt;的方式定义&lt;/li&gt;
&lt;li&gt;各个位置上的元素类型都要对应, 元素个数也要一致&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;枚举&#34;&gt;枚举&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;ts在es原有类型鸡出上加入枚举类型&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;any&#34;&gt;Any&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;程序有时是多变的, 有时我们在编写代码时并不能清楚的知道一个值到底时什么类型, 这个时候就需要用到any类型, eg: &lt;code&gt;let dom: any = document.getElementById(&#39;myId&#39;)&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;可以在定义数组类型时使用any来指定数组中的元素类型为任意类型&lt;/li&gt;
&lt;li&gt;不应该滥用any类型, 如果任何值都指定为any类型, 那么typescript就变成了&amp;quot;anyscript&amp;quot;😂&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;void&#34;&gt;void&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;void和any相反, any表示任意类型, void则是表示没有任意类型&lt;/li&gt;
&lt;li&gt;定义函数, 没有返回值时常用到&lt;/li&gt;
&lt;li&gt;void类型的变量只能赋值为&lt;code&gt;undefined&lt;/code&gt;和&lt;code&gt;null&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;nerver&#34;&gt;nerver&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;never类型指那些永不存在的类型&lt;/li&gt;
&lt;li&gt;除它自身外, 任何类型都不能赋值给never类型&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;unknown&#34;&gt;unknown&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;unknown和any很像, 但是unknown相对与any是安全的&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;拓展类型&#34;&gt;拓展类型&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;交叉类型
&lt;ul&gt;
&lt;li&gt;使用&lt;code&gt;&amp;amp;&lt;/code&gt;符号定义, 被&lt;code&gt;&amp;amp;&lt;/code&gt;符号链接的多个类型构成一个交叉类型&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;联合类型
&lt;ul&gt;
&lt;li&gt;联合类型是要求是要符合联合类型中任意一种类型即可, 使用&lt;code&gt;|&lt;/code&gt;符号定义&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
">Typescript之ts补充的六个类型</a>
      </div>
      
      <div class="item">
        <a class="result-title" href="https://blog.yguilai.com/post/x1hPVO9h_/"" data-c="
          &lt;p&gt;最近学习react, 看官方文档利用yarn新建项目运行&lt;code&gt;yarn create react-app my-app&lt;/code&gt;直接报错&lt;/p&gt;
&lt;!-- more --&gt;
&lt;p&gt;看网上解决办法很多都是修改&lt;code&gt;create-react-app.cmd&lt;/code&gt;, 然后添加环境变量, 感觉很不&lt;code&gt;优雅&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;查了很多资料后, 发现主要原因是我用npm全局安装的yarn, 导致yarn的bin目录与安装目录在不同分区🙄&lt;/p&gt;
&lt;p&gt;查看yarn的bin目录&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;yarn global bin
&lt;/code&gt;&lt;/pre&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;1&#34;&gt;&lt;img src=&#34;https://blog.yguilai.com/post-images/1590565038111.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;p&gt;查看yarn的安装目录&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;yarn global dir
&lt;/code&gt;&lt;/pre&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;2&#34;&gt;&lt;img src=&#34;https://blog.yguilai.com/post-images/1590565172092.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;blockquote&gt;
&lt;p&gt;这里是我已经修改了的, 原来是在C盘&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;如果发现bin目录与安装目录不在同一个分区, 就将yarn的安装位置修改到同一分区&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;yarn config set global-folder &amp;quot;D:\Develop\yarn\global&amp;quot;
yarn config set cache-folder &amp;quot;D:\Develop\yarn\cache&amp;quot;
&lt;/code&gt;&lt;/pre&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;3&#34;&gt;&lt;img src=&#34;https://blog.yguilai.com/post-images/1590565331006.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;p&gt;再运行&lt;code&gt;yarn create react-app my-app&lt;/code&gt;可以发现已经搞定了👌&lt;/p&gt;
">yarn create react-app 报错文件名、目录名或卷标语法不正确</a>
      </div>
      
      <div class="item">
        <a class="result-title" href="https://blog.yguilai.com/post/TKVP2Etmw/"" data-c="
          &lt;p&gt;网上找了很多方法, 如: 重装集显驱动、修改注册表, 都没用&lt;/p&gt;
&lt;!-- more --&gt;
&lt;p&gt;如果安装了TeamViewer, 向日葵之类的远程控制软件, 会自动安装监视器驱动&lt;/p&gt;
&lt;p&gt;解决办法:&lt;br&gt;
Win+R打开运行窗口, 输入&lt;code&gt;devmgmt.msc&lt;/code&gt;, 回车打开设备管理器面板, 找到监视器&lt;/p&gt;
&lt;p&gt;可以发现监视器驱动显示为&lt;code&gt;PnP-Monitor(Standard)&lt;/code&gt; (厂商为TeamViewer) 或者&lt;code&gt;Generic Monitor (orayOPMS)&lt;/code&gt;(厂商为向日葵)&lt;br&gt;
&lt;img src=&#34;https://blog.yguilai.com/post-images/1589976540518.jpg&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/p&gt;
&lt;p&gt;右键选中对应驱动, 打开&lt;code&gt;属性&lt;/code&gt; &amp;gt; &lt;code&gt;驱动程序&lt;/code&gt; &amp;gt; &lt;code&gt;更新驱动程序&lt;/code&gt; &amp;gt; &lt;code&gt;浏览计算机以查找驱动程序软件&lt;/code&gt; &amp;gt; &lt;code&gt;从计算机的设备驱动程序列表中选取&lt;/code&gt; &amp;gt; 选中&lt;code&gt;通用即插即用监视器&lt;/code&gt;, 点击下一步安装即可, 最好重启一下电脑&lt;/p&gt;
">Win10解决无法调节屏幕亮度问题</a>
      </div>
      
      <div class="item">
        <a class="result-title" href="https://blog.yguilai.com/post/L_yuiYNgS/"" data-c="
          &lt;pre&gt;&lt;code class=&#34;language-go&#34;&gt;package core

import (
	&amp;quot;go-gin-api-example/core/global&amp;quot;
	&amp;quot;go.uber.org/zap&amp;quot;
	&amp;quot;go.uber.org/zap/zapcore&amp;quot;
	&amp;quot;gopkg.in/natefinch/lumberjack.v2&amp;quot;
	&amp;quot;os&amp;quot;
	&amp;quot;strings&amp;quot;
)

func initZapLogger() {
	var logger *zap.Logger
	core := zapcore.NewCore(newZapEncoder(), newWriteSyncer(), newZapLevel())

	// set initialize fields
	field := zap.Fields(zap.String(&amp;quot;ApplicationName&amp;quot;, global.CONFIG.App.Name))

	// judge current environment is pro?
	if global.CONFIG.App.Env != &amp;quot;pro&amp;quot; {
		// enable dev mode
		caller := zap.AddCaller()
		development := zap.Development()
		logger = zap.New(core, caller, development, field)
	} else {
		logger = zap.New(core, field)
	}

	// save as a global variable
	global.LOG = logger
}

func newWriteSyncer() zapcore.WriteSyncer {
	if !global.CONFIG.Log.EnableLogFile {
		return zapcore.NewMultiWriteSyncer(zapcore.AddSync(os.Stdout))
	} else {
		logConfig := global.CONFIG.Log
		hook := lumberjack.Logger{
			Filename:   logConfig.File.Path + string(os.PathSeparator) + global.CONFIG.App.Name + &amp;quot;.log&amp;quot;,
			MaxSize:    logConfig.File.MaxSize,
			MaxBackups: logConfig.File.MaxBackups,
			MaxAge:     logConfig.File.MaxAge,
			Compress:   logConfig.File.Compress,
		}
		return zapcore.NewMultiWriteSyncer(zapcore.AddSync(os.Stdout), zapcore.AddSync(&amp;amp;hook))
	}
}

func newZapEncoder() zapcore.Encoder {
	encoderCfg := zapcore.EncoderConfig{
		TimeKey:        &amp;quot;time&amp;quot;,
		LevelKey:       &amp;quot;level&amp;quot;,
		NameKey:        &amp;quot;logger&amp;quot;,
		CallerKey:      &amp;quot;lineNum&amp;quot;,
		MessageKey:     &amp;quot;msg&amp;quot;,
		StacktraceKey:  &amp;quot;stacktrace&amp;quot;,
		LineEnding:     zapcore.DefaultLineEnding,
		EncodeLevel:    zapcore.CapitalLevelEncoder,    // 大写编码器
		EncodeTime:     zapcore.ISO8601TimeEncoder,     // ISO8601 UTC 时间格式
		EncodeDuration: zapcore.SecondsDurationEncoder,
		EncodeCaller:   zapcore.ShortCallerEncoder,     // 短路径编码器
		EncodeName:     zapcore.FullNameEncoder,
	}

	if global.CONFIG.Log.Encoder == &amp;quot;json&amp;quot; {
		return zapcore.NewJSONEncoder(encoderCfg)
	} else {
		return zapcore.NewConsoleEncoder(encoderCfg)
	}
}

func newZapLevel() zap.AtomicLevel {
	levelMap := map[string]zapcore.Level{
		&amp;quot;DEBUG&amp;quot;:  zap.DebugLevel,
		&amp;quot;INFO&amp;quot;:   zap.InfoLevel,
		&amp;quot;WARN&amp;quot;:   zap.WarnLevel,
		&amp;quot;ERROR&amp;quot;:  zap.ErrorLevel,
		&amp;quot;DPANIC&amp;quot;: zap.DPanicLevel,
		&amp;quot;PANIC&amp;quot;:  zap.PanicLevel,
		&amp;quot;FATAL&amp;quot;:  zap.FatalLevel,
	}

	level := zap.NewAtomicLevel()
	if l, ok := levelMap[strings.ToUpper(global.CONFIG.Log.Level)]; ok {
		level.SetLevel(l)
	} else {
		level.SetLevel(zap.InfoLevel)
	}

	return level
}
&lt;/code&gt;&lt;/pre&gt;
">Go日志库Zap与lumberjack配置</a>
      </div>
      
      <div class="item">
        <a class="result-title" href="https://blog.yguilai.com/post/elementui-zi-ding-yi-shang-chuan-yi-shang-chuan-tu-biao-dao-qi-niu-yun-wei-li/"" data-c="
          &lt;p&gt;解决ElementUI上传组件无法获取内部文件列表的缺陷&lt;/p&gt;
&lt;!-- more --&gt;
&lt;pre&gt;&lt;code class=&#34;language-html&#34;&gt;&amp;lt;template&amp;gt;
    &amp;lt;div&amp;gt;
        &amp;lt;el-upload
            action=&amp;quot;#&amp;quot;
            class=&amp;quot;icon-uploader&amp;quot;
            :auto-upload=&amp;quot;false&amp;quot;
            :on-change=&amp;quot;onIcoUploadChange&amp;quot;
            :show-file-list=&amp;quot;false&amp;quot;
            accept=&amp;quot;image/*&amp;quot;
          &amp;gt;
            &amp;lt;img v-if=&amp;quot;imageUrl !== &#39;&#39;&amp;quot; :src=&amp;quot;imageUrl&amp;quot; class=&amp;quot;ico&amp;quot; /&amp;gt;
            &amp;lt;i v-else class=&amp;quot;el-icon-plus&amp;quot; /&amp;gt;
            &amp;lt;div slot=&amp;quot;tip&amp;quot; class=&amp;quot;el-upload__tip&amp;quot;&amp;gt;
              只能上传图片文件，且不超过200kb
            &amp;lt;/div&amp;gt;
          &amp;lt;/el-upload&amp;gt;
          &amp;lt;el-button @click=&amp;quot;upload()&amp;quot;&amp;gt;上传&amp;lt;/el-button&amp;gt;
    &amp;lt;/div&amp;gt;
&amp;lt;/ template&amp;gt;

&amp;lt;script&amp;gt;
export default {
    data() {
        return {
            icoFile: null,
            imageUrl: &#39;&#39;,
            qiniuToken: &#39;&#39;
        }
    },
    methods: {
        // 获取上传的文件对象
        onIcoUploadChange(file, fileList) {
            this.icoFile = file
            // 创建一个本地blob链接用于图片预览
            this.imageUrl = URL.createObjectURL(file.raw)
        },
        // 上传文件到七牛
        async upload() {
            if (this.icoFile === null) {
                this.$message.error(&#39;请先上传文件&#39;)
                return
            }

            // 判断token是否为空
            if (this.qiniuToken === &#39;&#39;) {
                try {
                const { data } = await getQiniuToken()
                this.qiniuToken = data
                } catch (err) {
                this.$message.error(err.message)
                return
                }
            }

            let fileKey = &#39;&#39;

            try {
                const formData = new FormData()
                formData.append(&#39;file&#39;, this.icoFile)
                formData.append(&#39;token&#39;, this.qiniuToken)
                const { key } = await uploadImg2Qiniu(formData)
                fileKey = key
                // 发送请求 将key存到数据库
                // ...
            } catch (err) {
                this.$message.error(err.message)
            }
        }
    }
}
&amp;lt;/script&amp;gt;

&amp;lt;style lang=&amp;quot;scss&amp;quot; scope&amp;gt;
$icoSize: 64px;

.icon-uploader .el-upload {
  width: $icoSize;
  height: $icoSize;
  position: relative;
  overflow: hidden;
  border: 1px dashed #d9d9d9;
  border-radius: 6px;
  cursor: pointer;
  position: relative;
  overflow: hidden;

  &amp;amp;:hover {
    border-color: #409eff;
  }
}

.icon-uploader .ico {
  width: $icoSize;
  height: $icoSize;
}

.icon-uploader .el-upload .el-icon-plus {
  width: $icoSize;
  height: $icoSize;
  font-size: 20px;
  color: #8c939d;
  line-height: $icoSize;
  text-align: center;
}
&amp;lt;/style&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;获取token及上传图片&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-js&#34;&gt;import request from &#39;@/utils/request&#39;

// 获取后端生成的token
export function getQiniuToken() {
  return request({
    url: &#39;/qntoken&#39;,
    method: &#39;GET&#39;
  })
}

export function uploadImg2Qiniu(formdata) {
  return request({
    // 该api从七牛获取, 不同地域的存储桶对应api不同
    url: process.env.VUE_APP_QINIU_UPLOAD_API, 
    method: &#39;POST&#39;,
    headers: {
      &#39;Content-Type&#39;: &#39;multipart/form-data&#39;
    },
    withCredentials: false, // 禁止跨域携带cookie，带cookie在七牛上有可能出现跨域问题
    timeout: 30000,
    data: formdata
  })
}
&lt;/code&gt;&lt;/pre&gt;
">ElementUI自定义上传 -以上传图标到七牛云为例</a>
      </div>
      
      <div class="item">
        <a class="result-title" href="https://blog.yguilai.com/post/links/"" data-c="
          &lt;p&gt;&lt;a href=&#34;https://251.wiki&#34; target=&#34;_blank&#34;&gt;移动的锦旗 -叶十三&lt;/a&gt;&lt;/p&gt;
">友链</a>
      </div>
      
      <div class="item">
        <a class="result-title" href="https://blog.yguilai.com/post/about/"" data-c="
          &lt;blockquote&gt;
&lt;p&gt;Welcome&lt;/p&gt;
&lt;/blockquote&gt;
">关于</a>
      </div>
      
    </div>
  </div>
</div>
<script>
  // var escape = "[{&#34;content&#34;:&#34;&lt;p&gt;直接上代码&lt;/p&gt;\n&lt;h4 id=\&#34;安装依赖\&#34;&gt;安装依赖&lt;/h4&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-bash\&#34;&gt;yarn add axios # 或者 npm install axios -S\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h4 id=\&#34;encapsulation\&#34;&gt;Encapsulation&lt;/h4&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-ts\&#34;&gt;// config/index.ts\nexport default {\n  api: {\n    devApiBaseUrl: &#39;/&#39;,             // 开发环境base url\n    proApiBaseUrl: &#39;/api/v1&#39;   // 生产环境base url\n  }\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-ts\&#34;&gt;// utils/request.ts\nimport axios, {AxiosInstance, AxiosRequestConfig, AxiosPromise, AxiosResponse} from &#39;axios&#39;\nimport config from &#39;@/config&#39;\n\nconst {api: {devApiBaseUrl, proApiBaseUrl}} = config\nconst apiBaseUrl = process.env.NODE_ENV === &#39;production&#39; ? proApiBaseUrl : devApiBaseUrl\n\n// 修改默认的content-type\naxios.defaults.headers.post[&#39;Content-Type&#39;] = &#39;application/x-www-form-urlencoded&#39;\n\n/**\n * 统一返回的数据格式, 根据具体业务修改\n */\nexport interface ResponseData {\n  code: number\n  msg: string\n  data?: any\n}\n\nclass HttpRequest {\n  constructor(public baseUrl: string = apiBaseUrl) {\n    this.baseUrl = baseUrl\n  }\n\n  public request(options: AxiosRequestConfig): AxiosPromise {\n    const instance: AxiosInstance = axios.create()\n    options = this.mergeConfig(options)\n    this.interceptors(instance, options.url)\n    return instance(options)\n  }\n\n  /**\n   * 配置拦截器\n   * @param instance\n   * @param url\n   */\n  private interceptors(instance: AxiosInstance, url?: string) {\n    instance.interceptors.request.use((config: AxiosRequestConfig) =&amp;gt; {\n      // 可以在这配置token 请求头\n      return config\n    }, error =&amp;gt; Promise.reject(error))\n\n    instance.interceptors.response.use((res: AxiosResponse) =&amp;gt; {\n      const {data} = res\n      const {code, msg} = data\n      // 这里设置返回状态码为0表示成功, 请根据具体业务修改\n      if (code !== 0) {\n        // TODO 使用消息窗提示错误\n        console.error(msg)\n      }\n      return res\n    }, error =&amp;gt; Promise.reject(error))\n  }\n\n  /**\n   * 合并基础配置\n   * @param options\n   */\n  private mergeConfig(options: AxiosRequestConfig): AxiosRequestConfig {\n    return Object.assign({baseURL: this.baseUrl}, options)\n  }\n}\n\nexport default HttpRequest\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h4 id=\&#34;how-to-use\&#34;&gt;How to use&lt;/h4&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-ts\&#34;&gt;// api/index.ts\nimport HttpRequest from &amp;quot;@/utils/request&amp;quot;\nexport * from &#39;@/utils/request&#39;\nexport default new HttpRequest()\n&lt;/code&gt;&lt;/pre&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-ts\&#34;&gt;// api/user.ts\nimport axios, {ResponseData} from &#39;./index&#39;\nimport {AxiosPromise} from &#39;axios&#39;\n\ninterface LoginReqArgInterface {\n  username: string\n  password: number | string\n}\n\n// 传入泛型变量ResponseData, 可以在操作返回结果集时, 获得代码提示\nexport const loginApi = (data: LoginReqArgInterface): AxiosPromise&amp;lt;ResponseData&amp;gt; =&amp;gt; {\n  return axios.request({\n    url: &#39;/user/login&#39;,\n    data,\n    method: &#39;POST&#39;\n  })\n}\n&lt;/code&gt;&lt;/pre&gt;\n&#34;,&#34;fileName&#34;:&#34;ojQKZXlfE&#34;,&#34;abstract&#34;:&#34;&#34;,&#34;title&#34;:&#34;Typescript之封装Axios&#34;,&#34;tags&#34;:[{&#34;name&#34;:&#34;ts&#34;,&#34;slug&#34;:&#34;nh-9Ei0Bc&#34;,&#34;used&#34;:true,&#34;link&#34;:&#34;https://blog.yguilai.com/tag/nh-9Ei0Bc/&#34;}],&#34;date&#34;:&#34;2020-06-05 16:50:48&#34;,&#34;dateFormat&#34;:&#34;2020-06-05&#34;,&#34;feature&#34;:&#34;&#34;,&#34;link&#34;:&#34;https://blog.yguilai.com/post/ojQKZXlfE/&#34;,&#34;hideInList&#34;:false,&#34;isTop&#34;:false,&#34;stats&#34;:{&#34;text&#34;:&#34;2 min read&#34;,&#34;time&#34;:111000,&#34;words&#34;:351,&#34;minutes&#34;:2},&#34;description&#34;:&#34;直接上代码\n安装依赖\nyarn add axios # 或者 npm install axios -S\n\nEncapsulation\n// config/index.ts\nexport default {\n  api: {\n    devA...&#34;,&#34;toc&#34;:&#34;&lt;ul class=\&#34;markdownIt-TOC\&#34;&gt;\n&lt;li&gt;\n&lt;ul&gt;\n&lt;li&gt;\n&lt;ul&gt;\n&lt;li&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E5%AE%89%E8%A3%85%E4%BE%9D%E8%B5%96\&#34;&gt;安装依赖&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#encapsulation\&#34;&gt;Encapsulation&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#how-to-use\&#34;&gt;How to use&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;/ul&gt;\n&#34;},{&#34;content&#34;:&#34;&lt;!-- more --&gt;\n&lt;h3 id=\&#34;tsconfigjson的可配置项\&#34;&gt;tsconfig.json的可配置项&lt;/h3&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-json\&#34;&gt;{\n    &amp;quot;compileOnSave&amp;quot;: true,\n    &amp;quot;files&amp;quot;: [],\n    &amp;quot;include&amp;quot;: [],\n    &amp;quot;exclude&amp;quot;: [],\n    &amp;quot;extends&amp;quot;: &amp;quot;&amp;quot;,\n    &amp;quot;compilerOptions&amp;quot;: {}\n}\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h3 id=\&#34;compileonsave\&#34;&gt;&lt;code&gt;compileOnSave&lt;/code&gt;&lt;/h3&gt;\n&lt;p&gt;&lt;code&gt;compileOnSave&lt;/code&gt;的值是&lt;code&gt;true&lt;/code&gt;或&lt;code&gt;false&lt;/code&gt;. 如果设为&lt;code&gt;true&lt;/code&gt;, 在编辑文件保存的时候, 编辑器会根据&lt;code&gt;tsconfig.json&lt;/code&gt;的配置重新生成文件.(需要编辑器支持)&lt;/p&gt;\n&lt;h3 id=\&#34;files\&#34;&gt;&lt;code&gt;files&lt;/code&gt;&lt;/h3&gt;\n&lt;p&gt;&lt;code&gt;files&lt;/code&gt;可以配置一个数组列表, 里面包含指定文件的相对或绝对路径. 编译器在编译ide时候只会编译包含在files中列出的文件. 如果不指定, 则取决于有没有设置&lt;code&gt;include&lt;/code&gt;选项; 如果没有&lt;code&gt;include&lt;/code&gt;选项, 则默认会编译根目录以及所有子目录的文件. 这里列出的路径必须是指定文件, 而不是某个文件夹, 而且不能使用&lt;code&gt;*&lt;/code&gt;、&lt;code&gt;?&lt;/code&gt;、&lt;code&gt;**/&lt;/code&gt;等通配符&lt;/p&gt;\n&lt;h3 id=\&#34;include\&#34;&gt;&lt;code&gt;include&lt;/code&gt;&lt;/h3&gt;\n&lt;p&gt;指定要编译的路径列表，但和 files 的区别在于，这里的路径可以是文件夹，也可以是文件，可以使&lt;br&gt;\n用相对和绝对路径，而且可以使用通配符. 比如 &amp;quot;./src&amp;quot; 即表示要编译 src 文件夹下的所有文件以及子文件夹的文件.&lt;/p&gt;\n&lt;h3 id=\&#34;exclude\&#34;&gt;&lt;code&gt;exclude&lt;/code&gt;&lt;/h3&gt;\n&lt;p&gt;表示要排除的、不编译的文件，它也可以指定一个列表，规则和 include 一样，可以是文件可以是文件夹, 可以是相对路径或绝对路径，可以使用通配符.&lt;/p&gt;\n&lt;h3 id=\&#34;extends\&#34;&gt;&lt;code&gt;extends&lt;/code&gt;&lt;/h3&gt;\n&lt;p&gt;通过指定一个其它的 tsconfig.json 文件路径，来继承这个配置文件里的配置，继承来的文件配置会覆&lt;br&gt;\n盖当前文件定义的配置. TS在 3.2版本开始，支持继承一个来自 Node.js包的tsconfig.json 配置文件.&lt;/p&gt;\n&lt;h3 id=\&#34;compileroptions\&#34;&gt;&lt;code&gt;compilerOptions&lt;/code&gt;&lt;/h3&gt;\n&lt;p&gt;包含很多可配置项, 用来设置编译选项.&lt;/p&gt;\n&lt;ul&gt;\n&lt;li&gt;\n&lt;p&gt;target&lt;br&gt;\n用于指定编译之后的版本目标, 可选值有: &lt;code&gt;ES3（默认值）&lt;/code&gt;、&lt;code&gt;ES5&lt;/code&gt;、&lt;code&gt;ES2015&lt;/code&gt;、&lt;code&gt;ES2016&lt;/code&gt;、&lt;code&gt;ES2017&lt;/code&gt;、&lt;code&gt;ESNEXT&lt;/code&gt;. 如果不配置, 则默认使用ES3版本, 如果设为ESNEXT, 则使用最新的ES规范版本.&lt;/p&gt;\n&lt;/li&gt;\n&lt;li&gt;\n&lt;p&gt;module&lt;br&gt;\n用于指定要使用的模块标准, 可选值: &lt;code&gt;commonjs&lt;/code&gt;、&lt;code&gt;amd&lt;/code&gt;、&lt;code&gt;system&lt;/code&gt;、&lt;code&gt;umd&lt;/code&gt;、&lt;code&gt;s2015(或写 es6)&lt;/code&gt;. 如果不设置module选项, 则判断&lt;code&gt;target&lt;/code&gt;选项, 如果&lt;code&gt;target&lt;/code&gt;渲染设为&lt;code&gt;ES6&lt;/code&gt;, 则module默认为&lt;code&gt;ES6&lt;/code&gt;, 否则就是&lt;code&gt;commonjs&lt;/code&gt;&lt;/p&gt;\n&lt;/li&gt;\n&lt;li&gt;\n&lt;p&gt;lib&lt;br&gt;\n用于指定要包含在编译中的库文件, 如果你要使用一些ES6的新语法, 则需要引入ES6/ES2015这个库, 如果没有指定 lib 配置，默认会加载一些库，而加载什么库是受 target 影响的。如果 target 为ES5，默认包含的库有 DOM、 ES5 和 ScriptHost ；如果 target 是 ES6，默认引入的库有DOM、ES6、DOM.Iterable 和 ScriptHost.&lt;/p&gt;\n&lt;/li&gt;\n&lt;li&gt;\n&lt;p&gt;allowJs&lt;br&gt;\nallowJs 设置的值为 true 或 false，用来指定是否允许编译 JS 文件，默认是 false，即不编译 JS 文件.&lt;/p&gt;\n&lt;/li&gt;\n&lt;/ul&gt;\n&lt;hr&gt;\n&lt;p&gt;未完待续...&lt;/p&gt;\n&#34;,&#34;fileName&#34;:&#34;oiRKwJIS-&#34;,&#34;abstract&#34;:&#34;&#34;,&#34;title&#34;:&#34;Typescript之tsconfig.json配置&#34;,&#34;tags&#34;:[{&#34;name&#34;:&#34;ts&#34;,&#34;slug&#34;:&#34;nh-9Ei0Bc&#34;,&#34;used&#34;:true,&#34;link&#34;:&#34;https://blog.yguilai.com/tag/nh-9Ei0Bc/&#34;}],&#34;date&#34;:&#34;2020-06-02 21:28:01&#34;,&#34;dateFormat&#34;:&#34;2020-06-02&#34;,&#34;feature&#34;:&#34;&#34;,&#34;link&#34;:&#34;https://blog.yguilai.com/post/oiRKwJIS-/&#34;,&#34;hideInList&#34;:false,&#34;isTop&#34;:false,&#34;stats&#34;:{&#34;text&#34;:&#34;3 min read&#34;,&#34;time&#34;:154000,&#34;words&#34;:685,&#34;minutes&#34;:3},&#34;description&#34;:&#34;\ntsconfig.json的可配置项\n{\n    &amp;quot;compileOnSave&amp;quot;: true,\n    &amp;quot;files&amp;quot;: [],\n    &amp;quot;include&amp;quot;: [],\n    &amp;...&#34;,&#34;toc&#34;:&#34;&lt;ul class=\&#34;markdownIt-TOC\&#34;&gt;\n&lt;li&gt;\n&lt;ul&gt;\n&lt;li&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=\&#34;#tsconfigjson%E7%9A%84%E5%8F%AF%E9%85%8D%E7%BD%AE%E9%A1%B9\&#34;&gt;tsconfig.json的可配置项&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#compileonsave\&#34;&gt;&lt;code&gt;compileOnSave&lt;/code&gt;&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#files\&#34;&gt;&lt;code&gt;files&lt;/code&gt;&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#include\&#34;&gt;&lt;code&gt;include&lt;/code&gt;&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#exclude\&#34;&gt;&lt;code&gt;exclude&lt;/code&gt;&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#extends\&#34;&gt;&lt;code&gt;extends&lt;/code&gt;&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#compileroptions\&#34;&gt;&lt;code&gt;compilerOptions&lt;/code&gt;&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;/ul&gt;\n&#34;},{&#34;content&#34;:&#34;&lt;p&gt;泛型约束就是使用一个类型和extends对泛型进行约束&lt;/p&gt;\n&lt;!-- more --&gt;\n&lt;h3 id=\&#34;泛型约束\&#34;&gt;泛型约束&lt;/h3&gt;\n&lt;p&gt;例子:&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-ts\&#34;&gt;interface WithLength {\n    length: number\n}\nconst getLength = &amp;lt;T extends WithLength&amp;gt;(param: T): number =&amp;gt; {\n    return param.length\n}\ngetLength(&amp;quot;abcdefg&amp;quot;)    // 7\ngetLength([1, 2, 3])        // 3\ngetLength({ length: 5 }) // 5\ngetLength(123)             // error 类型“123”的参数不能赋给类型“WithLength”的参数\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;从上述例子可以看到, 泛型变量&lt;code&gt;T&lt;/code&gt;受到接口&lt;code&gt;WithLenght&lt;/code&gt;的约束, 不管它是什么类型, 但必须有一个length属性.&lt;/p&gt;\n&lt;h3 id=\&#34;泛型约束中使用类型参数\&#34;&gt;泛型约束中使用类型参数&lt;/h3&gt;\n&lt;p&gt;例子:&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-ts\&#34;&gt;const getProp = (obj, propName) =&amp;gt; {\n    return obj[propName]\n}\nconst obj = { a: &#39;aaa&#39;, b: &#39;bbb&#39; }\ngetProp(obj, &#39;c&#39;)   // undefined\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;从上面这个例子可以看出, 当获取这个对象的&lt;code&gt;&#39;c&#39;&lt;/code&gt;属性时, 就会得到&lt;code&gt;undefined&lt;/code&gt;. 这里我们就需要用到索引类型&lt;code&gt;keyof&lt;/code&gt;结合泛型来实现对这个问题的检查&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-ts\&#34;&gt;const getProp = &amp;lt;T, K extends keyof T&amp;gt;(obj: T, propName: K) =&amp;gt; {\n    return obj[propName]\n}\nconst obj = { a: &#39;aaa&#39;, b: &#39;bbb&#39; }\ngetProp(obj, &#39;c&#39;)   // 类型“&amp;quot;c&amp;quot;”的参数不能赋给类型“&amp;quot;a&amp;quot; | &amp;quot;b&amp;quot;”的参数\n&lt;/code&gt;&lt;/pre&gt;\n&lt;blockquote&gt;\n&lt;p&gt;&lt;code&gt;keyof&lt;/code&gt;可以理解为一个由泛型变量&lt;code&gt;T&lt;/code&gt;的属性名构成的联合类型, 因此&lt;code&gt;K&lt;/code&gt;就被约束为了只能时&lt;code&gt;&#39;a&#39;&lt;/code&gt;或&lt;code&gt;&#39;b&#39;&lt;/code&gt;, 所传入字符串&lt;code&gt;&#39;c&#39;&lt;/code&gt;时, ts就会检测出错误&lt;/p&gt;\n&lt;/blockquote&gt;\n&#34;,&#34;fileName&#34;:&#34;ZUto8nM6t&#34;,&#34;abstract&#34;:&#34;&lt;p&gt;泛型约束就是使用一个类型和extends对泛型进行约束&lt;/p&gt;\n&#34;,&#34;title&#34;:&#34;Typescript之泛型约束&#34;,&#34;tags&#34;:[{&#34;name&#34;:&#34;ts&#34;,&#34;slug&#34;:&#34;nh-9Ei0Bc&#34;,&#34;used&#34;:true,&#34;link&#34;:&#34;https://blog.yguilai.com/tag/nh-9Ei0Bc/&#34;}],&#34;date&#34;:&#34;2020-06-02 19:46:41&#34;,&#34;dateFormat&#34;:&#34;2020-06-02&#34;,&#34;feature&#34;:&#34;&#34;,&#34;link&#34;:&#34;https://blog.yguilai.com/post/ZUto8nM6t/&#34;,&#34;hideInList&#34;:false,&#34;isTop&#34;:false,&#34;stats&#34;:{&#34;text&#34;:&#34;2 min read&#34;,&#34;time&#34;:79000,&#34;words&#34;:308,&#34;minutes&#34;:2},&#34;description&#34;:&#34;泛型约束就是使用一个类型和extends对泛型进行约束\n\n泛型约束\n例子:\ninterface WithLength {\n    length: number\n}\nconst getLength = &amp;lt;T extends WithLe...&#34;,&#34;toc&#34;:&#34;&lt;ul class=\&#34;markdownIt-TOC\&#34;&gt;\n&lt;li&gt;\n&lt;ul&gt;\n&lt;li&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E6%B3%9B%E5%9E%8B%E7%BA%A6%E6%9D%9F\&#34;&gt;泛型约束&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E6%B3%9B%E5%9E%8B%E7%BA%A6%E6%9D%9F%E4%B8%AD%E4%BD%BF%E7%94%A8%E7%B1%BB%E5%9E%8B%E5%8F%82%E6%95%B0\&#34;&gt;泛型约束中使用类型参数&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;/ul&gt;\n&#34;},{&#34;content&#34;:&#34;&lt;p&gt;两种写法, 一种是&lt;code&gt;&amp;lt;type&amp;gt;value&lt;/code&gt;, 一种是&lt;code&gt;value as type&lt;/code&gt;&lt;/p&gt;\n&lt;!-- more --&gt;\n&lt;p&gt;例子:&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-typescript\&#34;&gt;const getStrLength = (target: string | number): number =&amp;gt; {\n    if ((&amp;lt;string&amp;gt;targer).length) {  // 这种写法在jsx中不支持, 同时也是tslint不建议的写法\n        return (target as string).length    // 建议写法\n    } else {\n        return target.toString().length\n    }\n}\n&lt;/code&gt;&lt;/pre&gt;\n&#34;,&#34;fileName&#34;:&#34;Zwy9o_K7j&#34;,&#34;abstract&#34;:&#34;&lt;p&gt;两种写法, 一种是&lt;code&gt;&amp;lt;type&amp;gt;value&lt;/code&gt;, 一种是&lt;code&gt;value as type&lt;/code&gt;&lt;/p&gt;\n&#34;,&#34;title&#34;:&#34;Typescript之类型断言&#34;,&#34;tags&#34;:[{&#34;name&#34;:&#34;ts&#34;,&#34;slug&#34;:&#34;nh-9Ei0Bc&#34;,&#34;used&#34;:true,&#34;link&#34;:&#34;https://blog.yguilai.com/tag/nh-9Ei0Bc/&#34;}],&#34;date&#34;:&#34;2020-06-01 21:48:50&#34;,&#34;dateFormat&#34;:&#34;2020-06-01&#34;,&#34;feature&#34;:&#34;&#34;,&#34;link&#34;:&#34;https://blog.yguilai.com/post/Zwy9o_K7j/&#34;,&#34;hideInList&#34;:false,&#34;isTop&#34;:false,&#34;stats&#34;:{&#34;text&#34;:&#34;1 min read&#34;,&#34;time&#34;:19000,&#34;words&#34;:67,&#34;minutes&#34;:1},&#34;description&#34;:&#34;两种写法, 一种是&amp;lt;type&amp;gt;value, 一种是value as type\n\n例子:\nconst getStrLength = (target: string | number): number =&amp;gt; {\n    if ...&#34;,&#34;toc&#34;:&#34;&#34;},{&#34;content&#34;:&#34;&lt;!-- more --&gt;\n&lt;h4 id=\&#34;元组\&#34;&gt;元组&lt;/h4&gt;\n&lt;ul&gt;\n&lt;li&gt;元组可以看作是数组的拓展, 它表示已知的元素数量和类型的数组&lt;/li&gt;\n&lt;li&gt;通过&lt;code&gt;let tuple: [string, number, boolean]&lt;/code&gt;的方式定义&lt;/li&gt;\n&lt;li&gt;各个位置上的元素类型都要对应, 元素个数也要一致&lt;/li&gt;\n&lt;/ul&gt;\n&lt;h4 id=\&#34;枚举\&#34;&gt;枚举&lt;/h4&gt;\n&lt;ul&gt;\n&lt;li&gt;ts在es原有类型鸡出上加入枚举类型&lt;/li&gt;\n&lt;/ul&gt;\n&lt;h4 id=\&#34;any\&#34;&gt;Any&lt;/h4&gt;\n&lt;ul&gt;\n&lt;li&gt;程序有时是多变的, 有时我们在编写代码时并不能清楚的知道一个值到底时什么类型, 这个时候就需要用到any类型, eg: &lt;code&gt;let dom: any = document.getElementById(&#39;myId&#39;)&lt;/code&gt;&lt;/li&gt;\n&lt;li&gt;可以在定义数组类型时使用any来指定数组中的元素类型为任意类型&lt;/li&gt;\n&lt;li&gt;不应该滥用any类型, 如果任何值都指定为any类型, 那么typescript就变成了&amp;quot;anyscript&amp;quot;😂&lt;/li&gt;\n&lt;/ul&gt;\n&lt;h4 id=\&#34;void\&#34;&gt;void&lt;/h4&gt;\n&lt;ul&gt;\n&lt;li&gt;void和any相反, any表示任意类型, void则是表示没有任意类型&lt;/li&gt;\n&lt;li&gt;定义函数, 没有返回值时常用到&lt;/li&gt;\n&lt;li&gt;void类型的变量只能赋值为&lt;code&gt;undefined&lt;/code&gt;和&lt;code&gt;null&lt;/code&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;h4 id=\&#34;nerver\&#34;&gt;nerver&lt;/h4&gt;\n&lt;ul&gt;\n&lt;li&gt;never类型指那些永不存在的类型&lt;/li&gt;\n&lt;li&gt;除它自身外, 任何类型都不能赋值给never类型&lt;/li&gt;\n&lt;/ul&gt;\n&lt;h4 id=\&#34;unknown\&#34;&gt;unknown&lt;/h4&gt;\n&lt;ul&gt;\n&lt;li&gt;unknown和any很像, 但是unknown相对与any是安全的&lt;/li&gt;\n&lt;/ul&gt;\n&lt;h4 id=\&#34;拓展类型\&#34;&gt;拓展类型&lt;/h4&gt;\n&lt;ul&gt;\n&lt;li&gt;交叉类型\n&lt;ul&gt;\n&lt;li&gt;使用&lt;code&gt;&amp;amp;&lt;/code&gt;符号定义, 被&lt;code&gt;&amp;amp;&lt;/code&gt;符号链接的多个类型构成一个交叉类型&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;li&gt;联合类型\n&lt;ul&gt;\n&lt;li&gt;联合类型是要求是要符合联合类型中任意一种类型即可, 使用&lt;code&gt;|&lt;/code&gt;符号定义&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;/ul&gt;\n&#34;,&#34;fileName&#34;:&#34;zpYjIzrB_&#34;,&#34;abstract&#34;:&#34;&#34;,&#34;title&#34;:&#34;Typescript之ts补充的六个类型&#34;,&#34;tags&#34;:[{&#34;name&#34;:&#34;ts&#34;,&#34;slug&#34;:&#34;nh-9Ei0Bc&#34;,&#34;used&#34;:true,&#34;link&#34;:&#34;https://blog.yguilai.com/tag/nh-9Ei0Bc/&#34;}],&#34;date&#34;:&#34;2020-06-01 21:26:04&#34;,&#34;dateFormat&#34;:&#34;2020-06-01&#34;,&#34;feature&#34;:&#34;&#34;,&#34;link&#34;:&#34;https://blog.yguilai.com/post/zpYjIzrB_/&#34;,&#34;hideInList&#34;:false,&#34;isTop&#34;:false,&#34;stats&#34;:{&#34;text&#34;:&#34;2 min read&#34;,&#34;time&#34;:77000,&#34;words&#34;:359,&#34;minutes&#34;:2},&#34;description&#34;:&#34;\n元组\n\n元组可以看作是数组的拓展, 它表示已知的元素数量和类型的数组\n通过let tuple: [string, number, boolean]的方式定义\n各个位置上的元素类型都要对应, 元素个数也要一致\n\n枚举\n\nts在es原有类型鸡...&#34;,&#34;toc&#34;:&#34;&lt;ul class=\&#34;markdownIt-TOC\&#34;&gt;\n&lt;li&gt;\n&lt;ul&gt;\n&lt;li&gt;\n&lt;ul&gt;\n&lt;li&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E5%85%83%E7%BB%84\&#34;&gt;元组&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E6%9E%9A%E4%B8%BE\&#34;&gt;枚举&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#any\&#34;&gt;Any&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#void\&#34;&gt;void&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#nerver\&#34;&gt;nerver&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#unknown\&#34;&gt;unknown&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#%E6%8B%93%E5%B1%95%E7%B1%BB%E5%9E%8B\&#34;&gt;拓展类型&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;/ul&gt;\n&#34;},{&#34;content&#34;:&#34;&lt;p&gt;最近学习react, 看官方文档利用yarn新建项目运行&lt;code&gt;yarn create react-app my-app&lt;/code&gt;直接报错&lt;/p&gt;\n&lt;!-- more --&gt;\n&lt;p&gt;看网上解决办法很多都是修改&lt;code&gt;create-react-app.cmd&lt;/code&gt;, 然后添加环境变量, 感觉很不&lt;code&gt;优雅&lt;/code&gt;&lt;/p&gt;\n&lt;p&gt;查了很多资料后, 发现主要原因是我用npm全局安装的yarn, 导致yarn的bin目录与安装目录在不同分区🙄&lt;/p&gt;\n&lt;p&gt;查看yarn的bin目录&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-bash\&#34;&gt;yarn global bin\n&lt;/code&gt;&lt;/pre&gt;\n&lt;figure data-type=\&#34;image\&#34; tabindex=\&#34;1\&#34;&gt;&lt;img src=\&#34;https://blog.yguilai.com/post-images/1590565038111.png\&#34; alt=\&#34;\&#34; loading=\&#34;lazy\&#34;&gt;&lt;/figure&gt;\n&lt;p&gt;查看yarn的安装目录&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-bash\&#34;&gt;yarn global dir\n&lt;/code&gt;&lt;/pre&gt;\n&lt;figure data-type=\&#34;image\&#34; tabindex=\&#34;2\&#34;&gt;&lt;img src=\&#34;https://blog.yguilai.com/post-images/1590565172092.png\&#34; alt=\&#34;\&#34; loading=\&#34;lazy\&#34;&gt;&lt;/figure&gt;\n&lt;blockquote&gt;\n&lt;p&gt;这里是我已经修改了的, 原来是在C盘&lt;/p&gt;\n&lt;/blockquote&gt;\n&lt;p&gt;如果发现bin目录与安装目录不在同一个分区, 就将yarn的安装位置修改到同一分区&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-bash\&#34;&gt;yarn config set global-folder &amp;quot;D:\\Develop\\yarn\\global&amp;quot;\nyarn config set cache-folder &amp;quot;D:\\Develop\\yarn\\cache&amp;quot;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;figure data-type=\&#34;image\&#34; tabindex=\&#34;3\&#34;&gt;&lt;img src=\&#34;https://blog.yguilai.com/post-images/1590565331006.png\&#34; alt=\&#34;\&#34; loading=\&#34;lazy\&#34;&gt;&lt;/figure&gt;\n&lt;p&gt;再运行&lt;code&gt;yarn create react-app my-app&lt;/code&gt;可以发现已经搞定了👌&lt;/p&gt;\n&#34;,&#34;fileName&#34;:&#34;x1hPVO9h_&#34;,&#34;abstract&#34;:&#34;&lt;p&gt;最近学习react, 看官方文档利用yarn新建项目运行&lt;code&gt;yarn create react-app my-app&lt;/code&gt;直接报错&lt;/p&gt;\n&#34;,&#34;title&#34;:&#34;yarn create react-app 报错文件名、目录名或卷标语法不正确&#34;,&#34;tags&#34;:[{&#34;name&#34;:&#34;yarn&#34;,&#34;slug&#34;:&#34;L4GVqbVyn&#34;,&#34;used&#34;:true,&#34;link&#34;:&#34;https://blog.yguilai.com/tag/L4GVqbVyn/&#34;},{&#34;name&#34;:&#34;react&#34;,&#34;slug&#34;:&#34;6XQoZCHJLu&#34;,&#34;used&#34;:true,&#34;link&#34;:&#34;https://blog.yguilai.com/tag/6XQoZCHJLu/&#34;}],&#34;date&#34;:&#34;2020-05-27 15:29:09&#34;,&#34;dateFormat&#34;:&#34;2020-05-27&#34;,&#34;feature&#34;:&#34;&#34;,&#34;link&#34;:&#34;https://blog.yguilai.com/post/x1hPVO9h_/&#34;,&#34;hideInList&#34;:false,&#34;isTop&#34;:false,&#34;stats&#34;:{&#34;text&#34;:&#34;1 min read&#34;,&#34;time&#34;:50000,&#34;words&#34;:207,&#34;minutes&#34;:1},&#34;description&#34;:&#34;最近学习react, 看官方文档利用yarn新建项目运行yarn create react-app my-app直接报错\n\n看网上解决办法很多都是修改create-react-app.cmd, 然后添加环境变量, 感觉很不优雅\n查了很多资料...&#34;,&#34;toc&#34;:&#34;&#34;},{&#34;content&#34;:&#34;&lt;p&gt;网上找了很多方法, 如: 重装集显驱动、修改注册表, 都没用&lt;/p&gt;\n&lt;!-- more --&gt;\n&lt;p&gt;如果安装了TeamViewer, 向日葵之类的远程控制软件, 会自动安装监视器驱动&lt;/p&gt;\n&lt;p&gt;解决办法:&lt;br&gt;\nWin+R打开运行窗口, 输入&lt;code&gt;devmgmt.msc&lt;/code&gt;, 回车打开设备管理器面板, 找到监视器&lt;/p&gt;\n&lt;p&gt;可以发现监视器驱动显示为&lt;code&gt;PnP-Monitor(Standard)&lt;/code&gt; (厂商为TeamViewer) 或者&lt;code&gt;Generic Monitor (orayOPMS)&lt;/code&gt;(厂商为向日葵)&lt;br&gt;\n&lt;img src=\&#34;https://blog.yguilai.com/post-images/1589976540518.jpg\&#34; alt=\&#34;\&#34; loading=\&#34;lazy\&#34;&gt;&lt;/p&gt;\n&lt;p&gt;右键选中对应驱动, 打开&lt;code&gt;属性&lt;/code&gt; &amp;gt; &lt;code&gt;驱动程序&lt;/code&gt; &amp;gt; &lt;code&gt;更新驱动程序&lt;/code&gt; &amp;gt; &lt;code&gt;浏览计算机以查找驱动程序软件&lt;/code&gt; &amp;gt; &lt;code&gt;从计算机的设备驱动程序列表中选取&lt;/code&gt; &amp;gt; 选中&lt;code&gt;通用即插即用监视器&lt;/code&gt;, 点击下一步安装即可, 最好重启一下电脑&lt;/p&gt;\n&#34;,&#34;fileName&#34;:&#34;TKVP2Etmw&#34;,&#34;abstract&#34;:&#34;&lt;p&gt;网上找了很多方法, 如: 重装集显驱动、修改注册表, 都没用&lt;/p&gt;\n&#34;,&#34;title&#34;:&#34;Win10解决无法调节屏幕亮度问题&#34;,&#34;tags&#34;:[{&#34;name&#34;:&#34;Win10&#34;,&#34;slug&#34;:&#34;zixpeIzkI&#34;,&#34;used&#34;:true,&#34;link&#34;:&#34;https://blog.yguilai.com/tag/zixpeIzkI/&#34;}],&#34;date&#34;:&#34;2020-05-20 20:00:17&#34;,&#34;dateFormat&#34;:&#34;2020-05-20&#34;,&#34;feature&#34;:&#34;&#34;,&#34;link&#34;:&#34;https://blog.yguilai.com/post/TKVP2Etmw/&#34;,&#34;hideInList&#34;:false,&#34;isTop&#34;:false,&#34;stats&#34;:{&#34;text&#34;:&#34;1 min read&#34;,&#34;time&#34;:42000,&#34;words&#34;:198,&#34;minutes&#34;:1},&#34;description&#34;:&#34;网上找了很多方法, 如: 重装集显驱动、修改注册表, 都没用\n\n如果安装了TeamViewer, 向日葵之类的远程控制软件, 会自动安装监视器驱动\n解决办法:\nWin+R打开运行窗口, 输入devmgmt.msc, 回车打开设备管理器面板,...&#34;,&#34;toc&#34;:&#34;&#34;},{&#34;content&#34;:&#34;&lt;pre&gt;&lt;code class=\&#34;language-go\&#34;&gt;package core\n\nimport (\n\t&amp;quot;go-gin-api-example/core/global&amp;quot;\n\t&amp;quot;go.uber.org/zap&amp;quot;\n\t&amp;quot;go.uber.org/zap/zapcore&amp;quot;\n\t&amp;quot;gopkg.in/natefinch/lumberjack.v2&amp;quot;\n\t&amp;quot;os&amp;quot;\n\t&amp;quot;strings&amp;quot;\n)\n\nfunc initZapLogger() {\n\tvar logger *zap.Logger\n\tcore := zapcore.NewCore(newZapEncoder(), newWriteSyncer(), newZapLevel())\n\n\t// set initialize fields\n\tfield := zap.Fields(zap.String(&amp;quot;ApplicationName&amp;quot;, global.CONFIG.App.Name))\n\n\t// judge current environment is pro?\n\tif global.CONFIG.App.Env != &amp;quot;pro&amp;quot; {\n\t\t// enable dev mode\n\t\tcaller := zap.AddCaller()\n\t\tdevelopment := zap.Development()\n\t\tlogger = zap.New(core, caller, development, field)\n\t} else {\n\t\tlogger = zap.New(core, field)\n\t}\n\n\t// save as a global variable\n\tglobal.LOG = logger\n}\n\nfunc newWriteSyncer() zapcore.WriteSyncer {\n\tif !global.CONFIG.Log.EnableLogFile {\n\t\treturn zapcore.NewMultiWriteSyncer(zapcore.AddSync(os.Stdout))\n\t} else {\n\t\tlogConfig := global.CONFIG.Log\n\t\thook := lumberjack.Logger{\n\t\t\tFilename:   logConfig.File.Path + string(os.PathSeparator) + global.CONFIG.App.Name + &amp;quot;.log&amp;quot;,\n\t\t\tMaxSize:    logConfig.File.MaxSize,\n\t\t\tMaxBackups: logConfig.File.MaxBackups,\n\t\t\tMaxAge:     logConfig.File.MaxAge,\n\t\t\tCompress:   logConfig.File.Compress,\n\t\t}\n\t\treturn zapcore.NewMultiWriteSyncer(zapcore.AddSync(os.Stdout), zapcore.AddSync(&amp;amp;hook))\n\t}\n}\n\nfunc newZapEncoder() zapcore.Encoder {\n\tencoderCfg := zapcore.EncoderConfig{\n\t\tTimeKey:        &amp;quot;time&amp;quot;,\n\t\tLevelKey:       &amp;quot;level&amp;quot;,\n\t\tNameKey:        &amp;quot;logger&amp;quot;,\n\t\tCallerKey:      &amp;quot;lineNum&amp;quot;,\n\t\tMessageKey:     &amp;quot;msg&amp;quot;,\n\t\tStacktraceKey:  &amp;quot;stacktrace&amp;quot;,\n\t\tLineEnding:     zapcore.DefaultLineEnding,\n\t\tEncodeLevel:    zapcore.CapitalLevelEncoder,    // 大写编码器\n\t\tEncodeTime:     zapcore.ISO8601TimeEncoder,     // ISO8601 UTC 时间格式\n\t\tEncodeDuration: zapcore.SecondsDurationEncoder,\n\t\tEncodeCaller:   zapcore.ShortCallerEncoder,     // 短路径编码器\n\t\tEncodeName:     zapcore.FullNameEncoder,\n\t}\n\n\tif global.CONFIG.Log.Encoder == &amp;quot;json&amp;quot; {\n\t\treturn zapcore.NewJSONEncoder(encoderCfg)\n\t} else {\n\t\treturn zapcore.NewConsoleEncoder(encoderCfg)\n\t}\n}\n\nfunc newZapLevel() zap.AtomicLevel {\n\tlevelMap := map[string]zapcore.Level{\n\t\t&amp;quot;DEBUG&amp;quot;:  zap.DebugLevel,\n\t\t&amp;quot;INFO&amp;quot;:   zap.InfoLevel,\n\t\t&amp;quot;WARN&amp;quot;:   zap.WarnLevel,\n\t\t&amp;quot;ERROR&amp;quot;:  zap.ErrorLevel,\n\t\t&amp;quot;DPANIC&amp;quot;: zap.DPanicLevel,\n\t\t&amp;quot;PANIC&amp;quot;:  zap.PanicLevel,\n\t\t&amp;quot;FATAL&amp;quot;:  zap.FatalLevel,\n\t}\n\n\tlevel := zap.NewAtomicLevel()\n\tif l, ok := levelMap[strings.ToUpper(global.CONFIG.Log.Level)]; ok {\n\t\tlevel.SetLevel(l)\n\t} else {\n\t\tlevel.SetLevel(zap.InfoLevel)\n\t}\n\n\treturn level\n}\n&lt;/code&gt;&lt;/pre&gt;\n&#34;,&#34;fileName&#34;:&#34;L_yuiYNgS&#34;,&#34;abstract&#34;:&#34;&#34;,&#34;title&#34;:&#34;Go日志库Zap与lumberjack配置&#34;,&#34;tags&#34;:[{&#34;name&#34;:&#34;go&#34;,&#34;slug&#34;:&#34;5hmCRpIl9&#34;,&#34;used&#34;:true,&#34;link&#34;:&#34;https://blog.yguilai.com/tag/5hmCRpIl9/&#34;}],&#34;date&#34;:&#34;2020-05-19 22:20:02&#34;,&#34;dateFormat&#34;:&#34;2020-05-19&#34;,&#34;feature&#34;:&#34;&#34;,&#34;link&#34;:&#34;https://blog.yguilai.com/post/L_yuiYNgS/&#34;,&#34;hideInList&#34;:false,&#34;isTop&#34;:false,&#34;stats&#34;:{&#34;text&#34;:&#34;2 min read&#34;,&#34;time&#34;:118000,&#34;words&#34;:323,&#34;minutes&#34;:2},&#34;description&#34;:&#34;package core\n\nimport (\n\t&amp;quot;go-gin-api-example/core/global&amp;quot;\n\t&amp;quot;go.uber.org/zap&amp;quot;\n\t&amp;quot;go.uber.org/zap/z...&#34;,&#34;toc&#34;:&#34;&#34;},{&#34;content&#34;:&#34;&lt;p&gt;解决ElementUI上传组件无法获取内部文件列表的缺陷&lt;/p&gt;\n&lt;!-- more --&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-html\&#34;&gt;&amp;lt;template&amp;gt;\n    &amp;lt;div&amp;gt;\n        &amp;lt;el-upload\n            action=&amp;quot;#&amp;quot;\n            class=&amp;quot;icon-uploader&amp;quot;\n            :auto-upload=&amp;quot;false&amp;quot;\n            :on-change=&amp;quot;onIcoUploadChange&amp;quot;\n            :show-file-list=&amp;quot;false&amp;quot;\n            accept=&amp;quot;image/*&amp;quot;\n          &amp;gt;\n            &amp;lt;img v-if=&amp;quot;imageUrl !== &#39;&#39;&amp;quot; :src=&amp;quot;imageUrl&amp;quot; class=&amp;quot;ico&amp;quot; /&amp;gt;\n            &amp;lt;i v-else class=&amp;quot;el-icon-plus&amp;quot; /&amp;gt;\n            &amp;lt;div slot=&amp;quot;tip&amp;quot; class=&amp;quot;el-upload__tip&amp;quot;&amp;gt;\n              只能上传图片文件，且不超过200kb\n            &amp;lt;/div&amp;gt;\n          &amp;lt;/el-upload&amp;gt;\n          &amp;lt;el-button @click=&amp;quot;upload()&amp;quot;&amp;gt;上传&amp;lt;/el-button&amp;gt;\n    &amp;lt;/div&amp;gt;\n&amp;lt;/ template&amp;gt;\n\n&amp;lt;script&amp;gt;\nexport default {\n    data() {\n        return {\n            icoFile: null,\n            imageUrl: &#39;&#39;,\n            qiniuToken: &#39;&#39;\n        }\n    },\n    methods: {\n        // 获取上传的文件对象\n        onIcoUploadChange(file, fileList) {\n            this.icoFile = file\n            // 创建一个本地blob链接用于图片预览\n            this.imageUrl = URL.createObjectURL(file.raw)\n        },\n        // 上传文件到七牛\n        async upload() {\n            if (this.icoFile === null) {\n                this.$message.error(&#39;请先上传文件&#39;)\n                return\n            }\n\n            // 判断token是否为空\n            if (this.qiniuToken === &#39;&#39;) {\n                try {\n                const { data } = await getQiniuToken()\n                this.qiniuToken = data\n                } catch (err) {\n                this.$message.error(err.message)\n                return\n                }\n            }\n\n            let fileKey = &#39;&#39;\n\n            try {\n                const formData = new FormData()\n                formData.append(&#39;file&#39;, this.icoFile)\n                formData.append(&#39;token&#39;, this.qiniuToken)\n                const { key } = await uploadImg2Qiniu(formData)\n                fileKey = key\n                // 发送请求 将key存到数据库\n                // ...\n            } catch (err) {\n                this.$message.error(err.message)\n            }\n        }\n    }\n}\n&amp;lt;/script&amp;gt;\n\n&amp;lt;style lang=&amp;quot;scss&amp;quot; scope&amp;gt;\n$icoSize: 64px;\n\n.icon-uploader .el-upload {\n  width: $icoSize;\n  height: $icoSize;\n  position: relative;\n  overflow: hidden;\n  border: 1px dashed #d9d9d9;\n  border-radius: 6px;\n  cursor: pointer;\n  position: relative;\n  overflow: hidden;\n\n  &amp;amp;:hover {\n    border-color: #409eff;\n  }\n}\n\n.icon-uploader .ico {\n  width: $icoSize;\n  height: $icoSize;\n}\n\n.icon-uploader .el-upload .el-icon-plus {\n  width: $icoSize;\n  height: $icoSize;\n  font-size: 20px;\n  color: #8c939d;\n  line-height: $icoSize;\n  text-align: center;\n}\n&amp;lt;/style&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;\n&lt;p&gt;获取token及上传图片&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&#34;language-js\&#34;&gt;import request from &#39;@/utils/request&#39;\n\n// 获取后端生成的token\nexport function getQiniuToken() {\n  return request({\n    url: &#39;/qntoken&#39;,\n    method: &#39;GET&#39;\n  })\n}\n\nexport function uploadImg2Qiniu(formdata) {\n  return request({\n    // 该api从七牛获取, 不同地域的存储桶对应api不同\n    url: process.env.VUE_APP_QINIU_UPLOAD_API, \n    method: &#39;POST&#39;,\n    headers: {\n      &#39;Content-Type&#39;: &#39;multipart/form-data&#39;\n    },\n    withCredentials: false, // 禁止跨域携带cookie，带cookie在七牛上有可能出现跨域问题\n    timeout: 30000,\n    data: formdata\n  })\n}\n&lt;/code&gt;&lt;/pre&gt;\n&#34;,&#34;fileName&#34;:&#34;elementui-zi-ding-yi-shang-chuan-yi-shang-chuan-tu-biao-dao-qi-niu-yun-wei-li&#34;,&#34;abstract&#34;:&#34;&lt;p&gt;解决ElementUI上传组件无法获取内部文件列表的缺陷&lt;/p&gt;\n&#34;,&#34;title&#34;:&#34;ElementUI自定义上传 -以上传图标到七牛云为例&#34;,&#34;tags&#34;:[{&#34;name&#34;:&#34;vue&#34;,&#34;slug&#34;:&#34;IaCuVJ50X&#34;,&#34;used&#34;:true,&#34;link&#34;:&#34;https://blog.yguilai.com/tag/IaCuVJ50X/&#34;},{&#34;name&#34;:&#34;elementui&#34;,&#34;slug&#34;:&#34;MUM54ZIS_o&#34;,&#34;used&#34;:true,&#34;link&#34;:&#34;https://blog.yguilai.com/tag/MUM54ZIS_o/&#34;}],&#34;date&#34;:&#34;2020-05-19 15:30:51&#34;,&#34;dateFormat&#34;:&#34;2020-05-19&#34;,&#34;feature&#34;:&#34;&#34;,&#34;link&#34;:&#34;https://blog.yguilai.com/post/elementui-zi-ding-yi-shang-chuan-yi-shang-chuan-tu-biao-dao-qi-niu-yun-wei-li/&#34;,&#34;hideInList&#34;:false,&#34;isTop&#34;:false,&#34;stats&#34;:{&#34;text&#34;:&#34;3 min read&#34;,&#34;time&#34;:143000,&#34;words&#34;:447,&#34;minutes&#34;:3},&#34;description&#34;:&#34;解决ElementUI上传组件无法获取内部文件列表的缺陷\n\n&amp;lt;template&amp;gt;\n    &amp;lt;div&amp;gt;\n        &amp;lt;el-upload\n            action=&amp;quot;#&amp;quot;\n  ...&#34;,&#34;toc&#34;:&#34;&#34;},{&#34;content&#34;:&#34;&lt;p&gt;&lt;a href=\&#34;https://251.wiki\&#34; target=\&#34;_blank\&#34;&gt;移动的锦旗 -叶十三&lt;/a&gt;&lt;/p&gt;\n&#34;,&#34;fileName&#34;:&#34;links&#34;,&#34;abstract&#34;:&#34;&#34;,&#34;title&#34;:&#34;友链&#34;,&#34;tags&#34;:[],&#34;date&#34;:&#34;2020-05-19 15:21:38&#34;,&#34;dateFormat&#34;:&#34;2020-05-19&#34;,&#34;feature&#34;:&#34;&#34;,&#34;link&#34;:&#34;https://blog.yguilai.com/post/links/&#34;,&#34;hideInList&#34;:true,&#34;isTop&#34;:false,&#34;stats&#34;:{&#34;text&#34;:&#34;1 min read&#34;,&#34;time&#34;:1000,&#34;words&#34;:8,&#34;minutes&#34;:1},&#34;description&#34;:&#34;移动的锦旗 -叶十三\n&#34;,&#34;toc&#34;:&#34;&#34;},{&#34;content&#34;:&#34;&lt;blockquote&gt;\n&lt;p&gt;Welcome&lt;/p&gt;\n&lt;/blockquote&gt;\n&#34;,&#34;fileName&#34;:&#34;about&#34;,&#34;abstract&#34;:&#34;&#34;,&#34;title&#34;:&#34;关于&#34;,&#34;tags&#34;:[],&#34;date&#34;:&#34;2019-01-25 19:09:48&#34;,&#34;dateFormat&#34;:&#34;2019-01-25&#34;,&#34;feature&#34;:&#34;&#34;,&#34;link&#34;:&#34;https://blog.yguilai.com/post/about/&#34;,&#34;hideInList&#34;:true,&#34;isTop&#34;:false,&#34;stats&#34;:{&#34;text&#34;:&#34;1 min read&#34;,&#34;time&#34;:0,&#34;words&#34;:1,&#34;minutes&#34;:1},&#34;description&#34;:&#34;\nWelcome\n\n&#34;,&#34;toc&#34;:&#34;&#34;}]";
  // var json = escape.substr(1, escape.length - 2);
  // var datas = json.split(',');
  // for (let i=0; i < datas.length; i++) {
  //   let item = datas[i];
  //   let attrs = item.split('34;:&#34')
  //   debugger
  //   console.log(datas[i])
  // }
  let escapeMap = new Map();
  escapeMap.set('&#34;', '"');
  escapeMap.set('&gt;', '>');
  escapeMap.set('&#39;', "'");
  escapeMap.set('&lt;', '<');
  escapeMap.set('&quot;', '"');
  escapeMap.set('&amp;', '&');
</script> -->

<script src="/media/js/mouse/peace.js"></script>


</html>